"use strict";(self.webpackChunkthesis_gantt_chart=self.webpackChunkthesis_gantt_chart||[]).push([[907],{2907:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(5043),r=s(579);const l=e=>{let{file:t,onMetadataExtracted:s,onTextExtracted:a,onError:l,className:i=""}=e;return(0,r.jsx)("div",{className:`pdf-viewer-placeholder ${i}`,children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl text-gray-400 mb-4",children:"\ud83d\udcc4"}),(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"PDF Viewer Temporarily Disabled"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:t?`File: ${t.name}`:"No file selected"}),(0,r.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"PDF functionality will be restored after deployment fixes"})]})})})};const i=new class{constructor(){this.cache=new Map,this.cacheExpiry=new Map,this.processedFiles=new Map,this.progressCallbacks=new Map,this.annotations=new Map,this.readingProgress=new Map,this.maxCacheSize=50,this.cacheExpiryTime=18e5,this.defaultOptions={thumbnailWidth:200,thumbnailHeight:280,maxTextLength:1e4,enableAnnotations:!0,enableProgressTracking:!0}}getCachedData(e){const t=Date.now(),s=this.cacheExpiry.get(e);return s&&t>s?(this.cache.delete(e),this.cacheExpiry.delete(e),null):this.cache.get(e)}setCachedData(e,t){if(this.cache.size>=this.maxCacheSize){const e=this.cache.keys().next().value;this.cache.delete(e),this.cacheExpiry.delete(e)}this.cache.set(e,t),this.cacheExpiry.set(e,Date.now()+this.cacheExpiryTime)}clearCache(){this.cache.clear(),this.cacheExpiry.clear(),this.annotations.clear(),this.readingProgress.clear()}registerProgressCallback(e,t){this.progressCallbacks.set(e,t)}updateProgress(e,t){const s=this.progressCallbacks.get(e);s&&s(t)}async extractMetadata(e){return console.warn("PDF metadata extraction temporarily disabled for deployment"),{title:e.name,author:"Unknown Author",subject:"",keywords:"",creator:"",producer:"",creationDate:null,modificationDate:null,pages:0,version:"1.4",fileSize:e.size,lastModified:e.lastModified,encrypted:!1,linearized:!1}}async generateThumbnail(e){return console.warn("PDF thumbnail generation temporarily disabled for deployment"),null}async extractTextContent(e){return console.warn("PDF text extraction temporarily disabled for deployment"),{fullText:"",pageTexts:[],totalPages:0,extractedPages:0}}async extractOutline(e){return console.warn("PDF outline extraction temporarily disabled for deployment"),{hasOutline:!1,outline:null}}async processPDFFile(e){return console.warn("PDF processing temporarily disabled for deployment"),{success:!1,originalFile:e,error:"PDF processing temporarily disabled for deployment",fallback:!0,fileId:`${e.name}_${Date.now()}`,metadata:await this.extractMetadata(e),thumbnail:null,textContent:await this.extractTextContent(e),outline:await this.extractOutline(e),processed:!1,timestamp:(new Date).toISOString()}}addAnnotation(e,t){return console.warn("PDF annotations temporarily disabled for deployment"),null}getAnnotations(e){return[]}updateAnnotation(e,t,s){return console.warn("PDF annotations temporarily disabled for deployment"),!1}deleteAnnotation(e,t){return console.warn("PDF annotations temporarily disabled for deployment"),!1}updateReadingProgress(e,t){this.readingProgress.set(e,t)}getReadingProgress(e){return{progress:this.readingProgress.get(e)||0}}createFallbackResult(e,t){return{success:!1,originalFile:e,error:t.message,fallback:!0,originalUrl:URL.createObjectURL(e),processed:!1,timestamp:(new Date).toISOString()}}getProcessingStatus(e){return{inProgress:this.progressCallbacks.has(e),cached:this.processedFiles.has(e)}}cleanup(){this.clearCache(),this.progressCallbacks.clear(),this.processedFiles.clear()}isValidPDFFile(e){return["application/pdf"].includes(e.type.toLowerCase())||e.name.toLowerCase().endsWith(".pdf")}getCacheStats(){return{size:this.cache.size,maxSize:this.maxCacheSize,entries:Array.from(this.cache.keys()),expiryTime:this.cacheExpiryTime}}searchInPDF(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console.warn("PDF search temporarily disabled for deployment"),{query:t,results:[],totalMatches:0,caseSensitive:s.caseSensitive||!1,wholeWord:s.wholeWord||!1}}extractContext(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;const r=Math.max(0,t-a),l=Math.min(e.length,t+s+a);return e.substring(r,l)}};var n=s(9144);const c=e=>{let{uploadedFiles:t=[],onFileSelect:s,selectedFile:c=null,className:o=""}=e;const[d,h]=(0,a.useState)([]),[m,x]=(0,a.useState)(null),[u,g]=(0,a.useState)(new Map),[p,b]=(0,a.useState)(!1),[f,y]=(0,a.useState)(""),[v,w]=(0,a.useState)([]),[j,N]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=t.filter((e=>i.isValidPDFFile(e)));h(e)}),[t]),(0,a.useEffect)((()=>{c&&i.isValidPDFFile(c)&&(x(c),N(!0))}),[c]);const P=async e=>{x(e),N(!0),s&&s(e);const t=`${e.name}_${e.size}`;u.has(t)||await F(e)},F=async e=>{try{b(!0);const t=await i.processPDFFile(e,{thumbnailWidth:150,thumbnailHeight:200,enableAnnotations:!0,enableProgressTracking:!0}),s=`${e.name}_${e.size}`;g((e=>new Map(e).set(s,t)))}catch(t){console.error("Error processing PDF:",t)}finally{b(!1)}},D=()=>{if(!f.trim())return void w([]);const e=[];for(const[t,s]of u)if(s.success&&s.fileId){const a=i.searchInPDF(s.fileId,f,{caseSensitive:!1,wholeWord:!1});a.results.length>0&&e.push({file:d.find((e=>`${e.name}_${e.size}`===t)),processed:s,searchResult:a})}w(e)},k=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return j&&m?(0,r.jsxs)("div",{className:`pdf-manager-viewer ${o} h-full flex flex-col`,children:[(0,r.jsxs)("div",{className:"viewer-header bg-gray-100 border-b p-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>N(!1),className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600",children:"\u2190 Back to Library"}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:m.name})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"text-sm text-gray-600",children:k(m.size)})})]}),(0,r.jsx)("div",{className:"viewer-content flex-1",children:(0,r.jsx)(l,{file:m,onMetadataExtracted:e=>{console.log("Extracted metadata:",e)},onTextExtracted:e=>{console.log("Extracted text content:",e)},onError:e=>{console.error("PDF viewer error:",e)},className:"h-full"})})]}):(0,r.jsxs)("div",{className:`pdf-manager ${o}`,children:[(0,r.jsxs)("div",{className:"pdf-manager-header mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"PDF Library"}),(0,r.jsxs)("div",{className:"search-bar flex gap-2 mb-4",children:[(0,r.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),onKeyPress:e=>"Enter"===e.key&&D(),placeholder:"Search across all PDFs...",className:"flex-1 px-3 py-2 border rounded-lg"}),(0,r.jsx)("button",{onClick:D,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Search"})]}),v.length>0&&(0,r.jsxs)("div",{className:"search-results mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-2",children:["Search Results (",v.reduce(((e,t)=>e+t.searchResult.totalMatches),0)," matches)"]}),v.map(((e,t)=>(0,r.jsxs)("div",{className:"search-result-item mb-2 p-2 bg-white rounded border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:e.file.name}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.searchResult.totalMatches," matches"]})]}),(0,r.jsx)("button",{onClick:()=>P(e.file),className:"text-sm text-blue-600 hover:text-blue-800",children:"Open and view matches \u2192"})]},t)))]})]}),0===d.length?(0,r.jsxs)("div",{className:"empty-state text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83d\udcc4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No PDF files found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Upload some PDF files to get started with PDF management."})]}):(0,r.jsx)("div",{className:"pdf-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d.map(((e,t)=>{const s=(e=>{const t=`${e.name}_${e.size}`;return u.get(t)})(e),a=null!==s&&void 0!==s&&s.success?i.getReadingProgress(s.fileId).progress:0;return(0,r.jsxs)("div",{className:"pdf-card bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer border",onClick:()=>P(e),children:[(0,r.jsxs)("div",{className:"thumbnail-container h-48 bg-gray-100 rounded-t-lg flex items-center justify-center relative overflow-hidden",children:[null!==s&&void 0!==s&&s.success&&s.thumbnail?(0,r.jsx)("img",{src:s.thumbnail.dataUrl,alt:`${e.name} thumbnail`,className:"max-w-full max-h-full object-contain"}):(0,r.jsxs)("div",{className:"text-gray-400 text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc4"}),(0,r.jsx)("div",{className:"text-sm",children:"PDF Preview"})]}),p&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,r.jsx)(n.A,{})}),a>0&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2 bg-gray-200",children:(0,r.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${a}%`}})})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 truncate mb-1",title:e.name,children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:["Size: ",k(e.size)]}),(null===s||void 0===s?void 0:s.success)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:["Pages: ",s.metadata.pages]}),(0,r.jsxs)("div",{children:["Author: ",s.metadata.author]}),a>0&&(0,r.jsxs)("div",{children:["Progress: ",a,"%"]})]}),(0,r.jsxs)("div",{children:["Modified: ",(l=new Date(e.lastModified).toISOString(),l?new Date(l).toLocaleDateString():"Unknown")]})]}),(0,r.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),P(e)},className:"flex-1 px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:"Open"}),!s&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),F(e)},className:"px-3 py-1 bg-gray-500 text-white text-sm rounded hover:bg-gray-600",children:"Process"})]})]})]},t);var l}))}),!1]})}}}]);
//# sourceMappingURL=907.8dc50d72.chunk.js.map