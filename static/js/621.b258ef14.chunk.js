"use strict";(self.webpackChunkthesis_gantt_chart=self.webpackChunkthesis_gantt_chart||[]).push([[621],{4621:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var r=t(5043),a=t(3937),l=t(5016),i=t(4779),d=t(5350),n=t(9144),c=t(579);const o=()=>{const{users:e,isLoading:s,error:t,assignRole:o,removeRole:x,loadUsers:u,clearError:m,currentUserRole:g,getUsersByRole:h}=(0,a.It)(),{user:p}=(0,l.As)(),{canViewUsers:b,canEditUsers:y,canAssignRoles:j}=(0,d.kz)(),[f,v]=(0,r.useState)(null),[N,w]=(0,r.useState)(""),[I,C]=(0,r.useState)(!1),[A,S]=(0,r.useState)("all"),[k,R]=(0,r.useState)(""),[D,U]=(0,r.useState)(!1),[P,O]=(0,r.useState)("");(0,r.useEffect)((()=>{b&&u()}),[b,u]);const K=e.filter((e=>{const s=e.userId.toLowerCase().includes(k.toLowerCase())||e.assignedBy&&e.assignedBy.toLowerCase().includes(k.toLowerCase()),t="all"===A||e.role===A;return s&&t})),L=e=>!!j&&(g===i.iK.ADMIN||g===i.iK.SUPERVISOR&&e===i.iK.PHD_CANDIDATE),E=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";v(e),O(s),w(t),U(!0)};if(!b)return(0,c.jsxs)("div",{className:"p-6 text-center",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-red-600",children:"Access Denied"}),(0,c.jsx)("p",{className:"text-gray-600",children:"You don\u2019t have permission to view user management."})]});if(s)return(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)(n.A,{}),(0,c.jsx)("p",{className:"text-center mt-4",children:"Loading users..."})]});const M=Object.values(i.iK).reduce(((e,s)=>(e[s]=h(s).length,e)),{});return(0,c.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Manage user roles and permissions"})]}),t&&(0,c.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsx)("p",{className:"text-red-800",children:t}),(0,c.jsx)("button",{onClick:m,className:"text-red-600 hover:text-red-800",children:"\xd7"})]})}),(0,c.jsx)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.entries(M).map((e=>{let[s,t]=e;return(0,c.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-sm",children:[(0,c.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t}),(0,c.jsx)("div",{className:"text-sm text-gray-600",children:i.P2[s]})]},s)}))}),(0,c.jsx)("div",{className:"mb-6 bg-white p-4 border border-gray-200 rounded-lg shadow-sm",children:(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Users"}),(0,c.jsx)("input",{type:"text",value:k,onChange:e=>R(e.target.value),placeholder:"Search by user ID or assigned by...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Role"}),(0,c.jsxs)("select",{value:A,onChange:e=>S(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,c.jsx)("option",{value:"all",children:"All Roles"}),Object.entries(i.P2).map((e=>{let[s,t]=e;return(0,c.jsx)("option",{value:s,children:t},s)}))]})]})]})}),(0,c.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:(0,c.jsxs)("div",{className:"overflow-x-auto",children:[(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Date"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned By"}),j&&(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map((e=>{return(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.userId,e.userId===p.id&&(0,c.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"You"})]}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.role===i.iK.ADMIN?"bg-purple-100 text-purple-800":e.role===i.iK.SUPERVISOR?"bg-green-100 text-green-800":e.role===i.iK.VIVA_COMMISSION?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:i.P2[e.role]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(s=e.assignedAt,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.assignedBy}),j&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:e.userId!==p.id&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsxs)("select",{onChange:s=>{s.target.value&&L(s.target.value)&&E(e,"assign",s.target.value),s.target.value=""},className:"text-sm border border-gray-300 rounded-md px-2 py-1",defaultValue:"",children:[(0,c.jsx)("option",{value:"",children:"Change Role"}),Object.entries(i.P2).map((s=>{let[t,r]=s;return L(t)&&t!==e.role&&(0,c.jsx)("option",{value:t,children:r},t)}))]}),(0,c.jsx)("button",{onClick:()=>E(e,"remove"),className:"text-red-600 hover:text-red-900",children:"Remove Role"})]})})})]},e.userId);var s}))})]}),0===K.length&&(0,c.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your criteria."})]})}),D&&(0,c.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,c.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,c.jsxs)("div",{className:"mt-3 text-center",children:[(0,c.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Confirm Action"}),(0,c.jsx)("div",{className:"mt-2 px-7 py-3",children:"assign"===P?(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to assign the role \u201c",i.P2[N],"\u201d to user \u201c",null===f||void 0===f?void 0:f.userId,"\u201d?"]}):(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Are you sure you want to remove the role from user \u201c",null===f||void 0===f?void 0:f.userId,"\u201d?"]})}),(0,c.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,c.jsx)("button",{onClick:()=>U(!1),className:"px-4 py-2 bg-gray-300 text-gray-800 text-base font-medium rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:I,children:"Cancel"}),(0,c.jsx)("button",{onClick:"assign"===P?async()=>{if(!f||!N)return;C(!0);(await o(f.userId,N,p.id)).success&&(v(null),w(""),U(!1)),C(!1)}:async()=>{if(!f)return;C(!0);(await x(f.userId,p.id)).success&&(v(null),U(!1)),C(!1)},className:"px-4 py-2 text-white text-base font-medium rounded-md focus:outline-none focus:ring-2 "+("assign"===P?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-300":"bg-red-600 hover:bg-red-700 focus:ring-red-300"),disabled:I,children:I?"Processing...":"Confirm"})]})]})})})]})}}}]);
//# sourceMappingURL=621.b258ef14.chunk.js.map