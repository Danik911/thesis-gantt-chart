{"version":3,"file":"static/js/940.6af69255.chunk.js","mappings":"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","sources":["../node_modules/file-saver/src/FileSaver.js","components/FileTooltip.js","components/FilePreviewModal.js","components/FileSearch.js","services/exportService.js","components/ExportPanel.js","components/WeeklyGanttChart.js"],"sourcesContent":["/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","import React from 'react';\r\n\r\nconst FileTooltip = ({ files, position, isVisible, onFileClick, onClose }) => {\r\n  if (!isVisible || !files || files.length === 0) return null;\r\n\r\n  const getFileIcon = (fileType) => {\r\n    switch (fileType.toLowerCase()) {\r\n      case 'pdf':\r\n        return (\r\n          <svg className=\"w-4 h-4 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M4 18h12V6l-4-4H4v16zm8-14v3h3l-3-3z\"/>\r\n          </svg>\r\n        );\r\n      case 'm4a':\r\n      case 'wav':\r\n      case 'mp3':\r\n        return (\r\n          <svg className=\"w-4 h-4 text-blue-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M18 3a1 1 0 0 0-1.196-.98l-10 2A1 1 0 0 0 6 5v6.499c-.313-.139-.648-.248-1-.291C4.227 11.061 3 11.3 3 12.5s1.227 1.439 2 1.291c.77-.147 1-.736 1-1.291V6.697l9-1.8v5.542c-.313-.139-.648-.248-1-.291C13.227 10.001 12 10.24 12 11.44s1.227 1.439 2 1.291c.77-.147 1-.736 1-1.291V3z\"/>\r\n          </svg>\r\n        );\r\n      default:\r\n        return (\r\n          <svg className=\"w-4 h-4 text-gray-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M4 4v12h12V8l-4-4H4zm8 0v3h3l-3-3z\"/>\r\n          </svg>\r\n        );\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 B';\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const truncateFileName = (name, maxLength = 25) => {\r\n    if (name.length <= maxLength) return name;\r\n    const extension = name.split('.').pop();\r\n    const nameWithoutExt = name.substring(0, name.lastIndexOf('.'));\r\n    const truncated = nameWithoutExt.substring(0, maxLength - extension.length - 4) + '...';\r\n    return truncated + '.' + extension;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-3 min-w-64 max-w-80\"\r\n      style={{\r\n        left: position.x + 10,\r\n        top: position.y - 10,\r\n        transform: position.x > window.innerWidth - 320 ? 'translateX(-100%)' : 'none'\r\n      }}\r\n    >\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <h4 className=\"text-sm font-semibold text-gray-800\">\r\n          Files ({files.length})\r\n        </h4>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n        >\r\n          <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\"/>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n        {files.map((file, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 cursor-pointer transition-colors\"\r\n            onClick={() => onFileClick(file)}\r\n          >\r\n            <div className=\"flex-shrink-0\">\r\n              {getFileIcon(file.type)}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"text-sm font-medium text-gray-900 truncate\">\r\n                {truncateFileName(file.name)}\r\n              </div>\r\n              <div className=\"text-xs text-gray-500\">\r\n                {formatFileSize(file.size)}\r\n                {file.uploadDate && (\r\n                  <span className=\"ml-2\">\r\n                    {new Date(file.uploadDate).toLocaleDateString()}\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"flex-shrink-0\">\r\n              <svg className=\"w-4 h-4 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fillRule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clipRule=\"evenodd\"/>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileTooltip; ","import React, { useState, useEffect } from 'react';\r\n\r\nconst FilePreviewModal = ({ file, isOpen, onClose }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && file) {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      // Simulate loading delay for preview\r\n      const timer = setTimeout(() => {\r\n        setIsLoading(false);\r\n      }, 500);\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isOpen, file]);\r\n\r\n  if (!isOpen || !file) return null;\r\n\r\n  const getFileIcon = (fileType) => {\r\n    switch (fileType.toLowerCase()) {\r\n      case 'pdf':\r\n        return (\r\n          <svg className=\"w-16 h-16 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M4 18h12V6l-4-4H4v16zm8-14v3h3l-3-3z\"/>\r\n          </svg>\r\n        );\r\n      case 'm4a':\r\n      case 'wav':\r\n      case 'mp3':\r\n        return (\r\n          <svg className=\"w-16 h-16 text-blue-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M18 3a1 1 0 0 0-1.196-.98l-10 2A1 1 0 0 0 6 5v6.499c-.313-.139-.648-.248-1-.291C4.227 11.061 3 11.3 3 12.5s1.227 1.439 2 1.291c.77-.147 1-.736 1-1.291V6.697l9-1.8v5.542c-.313-.139-.648-.248-1-.291C13.227 10.001 12 10.24 12 11.44s1.227 1.439 2 1.291c.77-.147 1-.736 1-1.291V3z\"/>\r\n          </svg>\r\n        );\r\n      default:\r\n        return (\r\n          <svg className=\"w-16 h-16 text-gray-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M4 4v12h12V8l-4-4H4zm8 0v3h3l-3-3z\"/>\r\n          </svg>\r\n        );\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 B';\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const canPreview = (fileType) => {\r\n    return ['pdf', 'jpg', 'jpeg', 'png', 'gif', 'svg'].includes(fileType.toLowerCase());\r\n  };\r\n\r\n  const renderPreview = () => {\r\n    if (isLoading) {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (error) {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"text-red-500 text-center\">\r\n            <svg className=\"w-12 h-12 mx-auto mb-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\"/>\r\n            </svg>\r\n            <p>Error loading file preview</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const fileType = file.type || file.name.split('.').pop();\r\n\r\n    if (canPreview(fileType)) {\r\n      if (fileType.toLowerCase() === 'pdf') {\r\n        return (\r\n          <div className=\"h-96 border rounded-lg bg-gray-50 flex items-center justify-center\">\r\n            <div className=\"text-center\">\r\n              {getFileIcon(fileType)}\r\n              <p className=\"mt-4 text-gray-600\">PDF Preview</p>\r\n              <p className=\"text-sm text-gray-500\">Click \"Open File\" to view in full</p>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else if (['jpg', 'jpeg', 'png', 'gif', 'svg'].includes(fileType.toLowerCase())) {\r\n        return (\r\n          <div className=\"h-96 border rounded-lg bg-gray-50 flex items-center justify-center\">\r\n            <img\r\n              src={file.url || file.path}\r\n              alt={file.name}\r\n              className=\"max-h-full max-w-full object-contain\"\r\n              onError={() => setError('Failed to load image')}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    // For audio files or non-previewable files\r\n    if (['m4a', 'wav', 'mp3'].includes(fileType.toLowerCase())) {\r\n      return (\r\n        <div className=\"h-64 border rounded-lg bg-gray-50 flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            {getFileIcon(fileType)}\r\n            <p className=\"mt-4 text-gray-600\">Audio File</p>\r\n            <p className=\"text-sm text-gray-500\">Click \"Open File\" to play</p>\r\n            {file.url && (\r\n              <audio controls className=\"mt-4\">\r\n                <source src={file.url} type={`audio/${fileType}`} />\r\n                Your browser does not support the audio element.\r\n              </audio>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"h-64 border rounded-lg bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          {getFileIcon(fileType)}\r\n          <p className=\"mt-4 text-gray-600\">File Preview</p>\r\n          <p className=\"text-sm text-gray-500\">Click \"Open File\" to download</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"flex-shrink-0\">\r\n              {getFileIcon(file.type || file.name.split('.').pop())}\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-gray-900 truncate\">\r\n                {file.name}\r\n              </h2>\r\n              <p className=\"text-sm text-gray-500\">\r\n                {formatFileSize(file.size)}\r\n                {file.uploadDate && (\r\n                  <span className=\"ml-2\">\r\n                    • Uploaded {new Date(file.uploadDate).toLocaleDateString()}\r\n                  </span>\r\n                )}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {renderPreview()}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-between p-6 border-t bg-gray-50\">\r\n          <div className=\"text-sm text-gray-600\">\r\n            {file.description && (\r\n              <p><strong>Description:</strong> {file.description}</p>\r\n            )}\r\n            {file.tags && file.tags.length > 0 && (\r\n              <p className=\"mt-1\">\r\n                <strong>Tags:</strong> {file.tags.join(', ')}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <div className=\"flex space-x-3\">\r\n            <button\r\n              onClick={() => {\r\n                if (file.url) {\r\n                  window.open(file.url, '_blank');\r\n                } else {\r\n                  // Handle file download logic here\r\n                  console.log('Download file:', file);\r\n                }\r\n              }}\r\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\r\n            >\r\n              Open File\r\n            </button>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilePreviewModal; ","import React, { useState, useEffect, useMemo } from 'react';\r\n\r\nconst FileSearch = ({ allFiles, onFileSelect, onClose, isOpen }) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedFileType, setSelectedFileType] = useState('all');\r\n  const [sortBy, setSortBy] = useState('name'); // name, date, size, type\r\n  const [sortOrder, setSortOrder] = useState('asc'); // asc, desc\r\n\r\n  // Reset search when modal opens\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setSearchTerm('');\r\n      setSelectedFileType('all');\r\n      setSortBy('name');\r\n      setSortOrder('asc');\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const filteredAndSortedFiles = useMemo(() => {\r\n    if (!allFiles || allFiles.length === 0) return [];\r\n\r\n    let filtered = allFiles.filter(fileData => {\r\n      const file = fileData.file;\r\n      const matchesSearch = searchTerm === '' || \r\n        file.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (file.description && file.description.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n        (file.tags && file.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase())));\r\n\r\n      const fileType = file.type || file.name.split('.').pop().toLowerCase();\r\n      const matchesType = selectedFileType === 'all' || fileType === selectedFileType;\r\n\r\n      return matchesSearch && matchesType;\r\n    });\r\n\r\n    // Sort files\r\n    filtered.sort((a, b) => {\r\n      const fileA = a.file;\r\n      const fileB = b.file;\r\n      let comparison = 0;\r\n\r\n      switch (sortBy) {\r\n        case 'name':\r\n          comparison = fileA.name.localeCompare(fileB.name);\r\n          break;\r\n        case 'date':\r\n          const dateA = fileA.uploadDate ? new Date(fileA.uploadDate) : new Date(0);\r\n          const dateB = fileB.uploadDate ? new Date(fileB.uploadDate) : new Date(0);\r\n          comparison = dateA - dateB;\r\n          break;\r\n        case 'size':\r\n          comparison = (fileA.size || 0) - (fileB.size || 0);\r\n          break;\r\n        case 'type':\r\n          const typeA = fileA.type || fileA.name.split('.').pop();\r\n          const typeB = fileB.type || fileB.name.split('.').pop();\r\n          comparison = typeA.localeCompare(typeB);\r\n          break;\r\n        default:\r\n          comparison = 0;\r\n      }\r\n\r\n      return sortOrder === 'asc' ? comparison : -comparison;\r\n    });\r\n\r\n    return filtered;\r\n  }, [allFiles, searchTerm, selectedFileType, sortBy, sortOrder]);\r\n\r\n  const getUniqueFileTypes = () => {\r\n    if (!allFiles) return [];\r\n    \r\n    const types = new Set();\r\n    allFiles.forEach(fileData => {\r\n      const fileType = fileData.file.type || fileData.file.name.split('.').pop().toLowerCase();\r\n      types.add(fileType);\r\n    });\r\n    \r\n    return Array.from(types).sort();\r\n  };\r\n\r\n  const getFileIcon = (fileType) => {\r\n    switch (fileType.toLowerCase()) {\r\n      case 'pdf':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M4 18h12V6l-4-4H4v16zm8-14v3h3l-3-3z\"/>\r\n          </svg>\r\n        );\r\n      case 'm4a':\r\n      case 'wav':\r\n      case 'mp3':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-blue-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M18 3a1 1 0 0 0-1.196-.98l-10 2A1 1 0 0 0 6 5v6.499c-.313-.139-.648-.248-1-.291C4.227 11.061 3 11.3 3 12.5s1.227 1.439 2 1.291c.77-.147 1-.736 1-1.291V6.697l9-1.8v5.542c-.313-.139-.648-.248-1-.291C13.227 10.001 12 10.24 12 11.44s1.227 1.439 2 1.291c.77-.147 1-.736 1-1.291V3z\"/>\r\n          </svg>\r\n        );\r\n      default:\r\n        return (\r\n          <svg className=\"w-5 h-5 text-gray-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path d=\"M4 4v12h12V8l-4-4H4zm8 0v3h3l-3-3z\"/>\r\n          </svg>\r\n        );\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 B';\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const toggleSort = (newSortBy) => {\r\n    if (sortBy === newSortBy) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortBy(newSortBy);\r\n      setSortOrder('asc');\r\n    }\r\n  };\r\n\r\n  const getSortIcon = (column) => {\r\n    if (sortBy !== column) {\r\n      return (\r\n        <svg className=\"w-4 h-4 text-gray-300\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n          <path d=\"M5 12l5-5 5 5H5z\"/>\r\n        </svg>\r\n      );\r\n    }\r\n    \r\n    return sortOrder === 'asc' ? (\r\n      <svg className=\"w-4 h-4 text-gray-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n        <path d=\"M5 12l5-5 5 5H5z\"/>\r\n      </svg>\r\n    ) : (\r\n      <svg className=\"w-4 h-4 text-gray-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n        <path d=\"M15 8l-5 5-5-5h10z\"/>\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">\r\n            File Search ({filteredAndSortedFiles.length} files)\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Filters */}\r\n        <div className=\"p-6 border-b bg-gray-50\">\r\n          <div className=\"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-4 md:space-y-0\">\r\n            {/* Search Input */}\r\n            <div className=\"flex-1\">\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <svg className=\"w-5 h-5 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\"/>\r\n                  </svg>\r\n                </div>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search files by name, description, or tags...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* File Type Filter */}\r\n            <div className=\"min-w-0\">\r\n              <select\r\n                value={selectedFileType}\r\n                onChange={(e) => setSelectedFileType(e.target.value)}\r\n                className=\"block w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"all\">All Types</option>\r\n                {getUniqueFileTypes().map(type => (\r\n                  <option key={type} value={type}>\r\n                    {type.toUpperCase()}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-hidden\">\r\n          {filteredAndSortedFiles.length === 0 ? (\r\n            <div className=\"flex items-center justify-center h-64 text-gray-500\">\r\n              <div className=\"text-center\">\r\n                <svg className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V4z\" clipRule=\"evenodd\"/>\r\n                </svg>\r\n                <p>No files found matching your criteria</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-auto h-96\">\r\n              {/* Table Header */}\r\n              <div className=\"sticky top-0 bg-gray-50 border-b px-6 py-3\">\r\n                <div className=\"grid grid-cols-12 gap-4 text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  <div \r\n                    className=\"col-span-5 flex items-center cursor-pointer hover:text-gray-700\"\r\n                    onClick={() => toggleSort('name')}\r\n                  >\r\n                    Name\r\n                    {getSortIcon('name')}\r\n                  </div>\r\n                  <div \r\n                    className=\"col-span-2 flex items-center cursor-pointer hover:text-gray-700\"\r\n                    onClick={() => toggleSort('type')}\r\n                  >\r\n                    Type\r\n                    {getSortIcon('type')}\r\n                  </div>\r\n                  <div \r\n                    className=\"col-span-2 flex items-center cursor-pointer hover:text-gray-700\"\r\n                    onClick={() => toggleSort('size')}\r\n                  >\r\n                    Size\r\n                    {getSortIcon('size')}\r\n                  </div>\r\n                  <div \r\n                    className=\"col-span-2 flex items-center cursor-pointer hover:text-gray-700\"\r\n                    onClick={() => toggleSort('date')}\r\n                  >\r\n                    Date\r\n                    {getSortIcon('date')}\r\n                  </div>\r\n                  <div className=\"col-span-1\">Activity</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* File List */}\r\n              <div className=\"divide-y divide-gray-200\">\r\n                {filteredAndSortedFiles.map((fileData, index) => {\r\n                  const file = fileData.file;\r\n                  const fileType = file.type || file.name.split('.').pop();\r\n                  \r\n                  return (\r\n                    <div\r\n                      key={index}\r\n                      className=\"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors grid grid-cols-12 gap-4 items-center\"\r\n                      onClick={() => onFileSelect(file)}\r\n                    >\r\n                      <div className=\"col-span-5 flex items-center space-x-3\">\r\n                        <div className=\"flex-shrink-0\">\r\n                          {getFileIcon(fileType)}\r\n                        </div>\r\n                        <div className=\"min-w-0\">\r\n                          <div className=\"text-sm font-medium text-gray-900 truncate\">\r\n                            {file.name}\r\n                          </div>\r\n                          {file.description && (\r\n                            <div className=\"text-xs text-gray-500 truncate\">\r\n                              {file.description}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-span-2 text-sm text-gray-500 uppercase\">\r\n                        {fileType}\r\n                      </div>\r\n                      <div className=\"col-span-2 text-sm text-gray-500\">\r\n                        {formatFileSize(file.size)}\r\n                      </div>\r\n                      <div className=\"col-span-2 text-sm text-gray-500\">\r\n                        {file.uploadDate ? new Date(file.uploadDate).toLocaleDateString() : '-'}\r\n                      </div>\r\n                      <div className=\"col-span-1 text-xs text-gray-400 truncate\">\r\n                        {fileData.activityName}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-6 border-t bg-gray-50\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <p className=\"text-sm text-gray-600\">\r\n              {filteredAndSortedFiles.length} of {allFiles?.length || 0} files shown\r\n            </p>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileSearch; ","// Temporary export service replacement for deployment\r\n// import jsPDF from 'jspdf';\r\n// import 'jspdf-autotable';\r\n// import * as XLSX from 'xlsx';\r\n// import PptxGenJS from 'pptxgenjs';\r\n// import JSZip from 'jszip';\r\nimport { saveAs } from 'file-saver';\r\n\r\nclass ExportService {\r\n  constructor() {\r\n    this.progressCallbacks = new Map();\r\n    this.templates = {\r\n      pdf: {\r\n        title: 'Thesis GANTT Chart',\r\n        author: 'Thesis Project',\r\n        colors: {\r\n          primary: '#2563eb',\r\n          secondary: '#64748b',\r\n          accent: '#10b981',\r\n          completed: '#22c55e',\r\n          inProgress: '#f59e0b',\r\n          pending: '#6b7280'\r\n        }\r\n      },\r\n      excel: {\r\n        sheetName: 'GANTT Chart',\r\n        headerStyle: {\r\n          font: { bold: true, sz: 12 },\r\n          fill: { fgColor: { rgb: '2563eb' } },\r\n          alignment: { horizontal: 'center' }\r\n        }\r\n      },\r\n      powerpoint: {\r\n        title: 'Thesis GANTT Chart Presentation',\r\n        subtitle: 'Project Timeline and Progress',\r\n        layout: 'LAYOUT_16x9'\r\n      }\r\n    };\r\n    \r\n    this.exportOptions = {\r\n      includeCompleted: true,\r\n      includePending: true,\r\n      includeInProgress: true,\r\n      dateRange: null,\r\n      specificTasks: null,\r\n      includeFiles: false,\r\n      includeNotes: false,\r\n      watermark: null,\r\n      customTitle: null\r\n    };\r\n  }\r\n\r\n  // Progress tracking\r\n  registerProgressCallback(exportId, callback) {\r\n    this.progressCallbacks.set(exportId, callback);\r\n  }\r\n\r\n  updateProgress(exportId, progress, message = '') {\r\n    const callback = this.progressCallbacks.get(exportId);\r\n    if (callback) {\r\n      callback({ progress, message });\r\n    }\r\n  }\r\n\r\n  // Data retrieval and processing\r\n  getGanttData() {\r\n    try {\r\n      const stored = localStorage.getItem('gantt-tasks');\r\n      if (!stored) return [];\r\n      \r\n      const data = JSON.parse(stored);\r\n      \r\n      if (data.v === 1 && data.t) {\r\n        return data.t.map(task => ({\r\n          id: task.i,\r\n          name: task.n,\r\n          activities: task.a.map(activity => ({\r\n            id: activity.i,\r\n            name: activity.n,\r\n            weeks: activity.w,\r\n            days: activity.d,\r\n            owner: activity.o,\r\n            color: activity.c,\r\n            isGateway: activity.g,\r\n            gatewayInfo: activity.gi,\r\n            files: activity.files || []\r\n          }))\r\n        }));\r\n      }\r\n      \r\n      return data;\r\n    } catch (error) {\r\n      console.error('Failed to retrieve GANTT data:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  getCompletedDays() {\r\n    try {\r\n      const completed = localStorage.getItem('gantt-completed-days');\r\n      return completed ? JSON.parse(completed) : {};\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  filterDataByOptions(data, options = {}) {\r\n    const mergedOptions = { ...this.exportOptions, ...options };\r\n    let filteredData = [...data];\r\n\r\n    if (mergedOptions.specificTasks && mergedOptions.specificTasks.length > 0) {\r\n      filteredData = filteredData.filter(task => \r\n        mergedOptions.specificTasks.includes(task.id)\r\n      );\r\n    }\r\n\r\n    filteredData = filteredData.map(task => ({\r\n      ...task,\r\n      activities: task.activities.filter(activity => {\r\n        const progress = this.calculateActivityProgress(activity);\r\n        if (progress === 100 && !mergedOptions.includeCompleted) return false;\r\n        if (progress > 0 && progress < 100 && !mergedOptions.includeInProgress) return false;\r\n        if (progress === 0 && !mergedOptions.includePending) return false;\r\n        return true;\r\n      })\r\n    })).filter(task => task.activities.length > 0);\r\n\r\n    return filteredData;\r\n  }\r\n\r\n  calculateActivityProgress(activity) {\r\n    const completedDays = this.getCompletedDays();\r\n    let totalDays = 0;\r\n    let completedCount = 0;\r\n\r\n    activity.weeks.forEach(weekIndex => {\r\n      activity.days.forEach(dayIndex => {\r\n        totalDays++;\r\n        const dayKey = `${activity.id}_${weekIndex}_${dayIndex}`;\r\n        if (completedDays[dayKey]) {\r\n          completedCount++;\r\n        }\r\n      });\r\n    });\r\n\r\n    return totalDays > 0 ? Math.round((completedCount / totalDays) * 100) : 0;\r\n  }\r\n\r\n  // Temporary disabled methods\r\n  async exportToPDF(options = {}) {\r\n    console.warn('PDF export temporarily disabled for deployment');\r\n    throw new Error('PDF export is temporarily disabled for deployment. Please use JSON export instead.');\r\n  }\r\n\r\n  async exportToExcel(options = {}) {\r\n    console.warn('Excel export temporarily disabled for deployment');\r\n    throw new Error('Excel export is temporarily disabled for deployment. Please use JSON export instead.');\r\n  }\r\n\r\n  async exportToPowerPoint(options = {}) {\r\n    console.warn('PowerPoint export temporarily disabled for deployment');\r\n    throw new Error('PowerPoint export is temporarily disabled for deployment. Please use JSON export instead.');\r\n  }\r\n\r\n  async exportToZIP(options = {}) {\r\n    console.warn('ZIP export temporarily disabled for deployment');\r\n    throw new Error('ZIP export is temporarily disabled for deployment. Please use JSON export instead.');\r\n  }\r\n\r\n  // Working exports\r\n  async exportToJSON(options = {}) {\r\n    const exportId = `json_${Date.now()}`;\r\n    try {\r\n      this.updateProgress(exportId, 10, 'Initializing JSON export...');\r\n      \r\n      const data = this.getGanttData();\r\n      const filteredData = this.filterDataByOptions(data, options);\r\n      \r\n      this.updateProgress(exportId, 30, 'Processing data...');\r\n      \r\n      const exportData = {\r\n        meta: {\r\n          exportedAt: new Date().toISOString(),\r\n          version: '1.0',\r\n          title: options.customTitle || this.templates.pdf.title,\r\n          totalTasks: filteredData.length,\r\n          totalActivities: filteredData.reduce((sum, task) => sum + task.activities.length, 0)\r\n        },\r\n        tasks: filteredData,\r\n        completedDays: this.getCompletedDays(),\r\n        options: options\r\n      };\r\n\r\n      this.updateProgress(exportId, 70, 'Creating JSON file...');\r\n      \r\n      const jsonString = JSON.stringify(exportData, null, 2);\r\n      const blob = new Blob([jsonString], { type: 'application/json' });\r\n      \r\n      this.updateProgress(exportId, 90, 'Saving file...');\r\n      \r\n      const filename = `gantt-chart-${new Date().toISOString().split('T')[0]}.json`;\r\n      saveAs(blob, filename);\r\n      \r\n      this.updateProgress(exportId, 100, 'JSON export completed');\r\n      \r\n      return {\r\n        success: true,\r\n        filename,\r\n        data: exportData\r\n      };\r\n    } catch (error) {\r\n      console.error('JSON export failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  generateCSV(data) {\r\n    let csv = 'Task,Activity,Owner,Progress,Total Days,Completed Days,Start Week,Duration\\n';\r\n    \r\n    data.forEach(task => {\r\n      task.activities.forEach(activity => {\r\n        const progress = this.calculateActivityProgress(activity);\r\n        const totalDays = activity.weeks.length * activity.days.length;\r\n        const completedDays = Math.round((progress / 100) * totalDays);\r\n        const startWeek = Math.min(...activity.weeks);\r\n        const duration = activity.weeks.length;\r\n        \r\n        csv += `\"${task.name}\",\"${activity.name}\",\"${activity.owner}\",${progress}%,${totalDays},${completedDays},${startWeek},${duration}\\n`;\r\n      });\r\n    });\r\n    \r\n    return csv;\r\n  }\r\n\r\n  generateTextSummary(data) {\r\n    let summary = 'GANTT Chart Summary\\n';\r\n    summary += '==================\\n\\n';\r\n    summary += `Generated on: ${new Date().toLocaleString()}\\n`;\r\n    summary += `Total Tasks: ${data.length}\\n`;\r\n    summary += `Total Activities: ${data.reduce((sum, task) => sum + task.activities.length, 0)}\\n\\n`;\r\n    \r\n    data.forEach(task => {\r\n      summary += `Task: ${task.name}\\n`;\r\n      summary += '-'.repeat(task.name.length + 6) + '\\n';\r\n      \r\n      task.activities.forEach(activity => {\r\n        const progress = this.calculateActivityProgress(activity);\r\n        summary += `  • ${activity.name} (${activity.owner}) - ${progress}% complete\\n`;\r\n      });\r\n      \r\n      summary += '\\n';\r\n    });\r\n    \r\n    return summary;\r\n  }\r\n\r\n  // Utility methods\r\n  getWeekHeaders() {\r\n    return Array.from({ length: 52 }, (_, i) => `Week ${i + 1}`);\r\n  }\r\n\r\n  updateTemplate(type, updates) {\r\n    if (this.templates[type]) {\r\n      this.templates[type] = { ...this.templates[type], ...updates };\r\n    }\r\n  }\r\n\r\n  getTemplate(type) {\r\n    return this.templates[type] || null;\r\n  }\r\n\r\n  setDefaultExportOptions(options) {\r\n    this.exportOptions = { ...this.exportOptions, ...options };\r\n  }\r\n\r\n  getDefaultExportOptions() {\r\n    return { ...this.exportOptions };\r\n  }\r\n\r\n  cleanup() {\r\n    this.progressCallbacks.clear();\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nconst exportService = new ExportService();\r\n\r\nexport default exportService; ","import React, { useState, useEffect } from 'react';\r\nimport exportService from '../services/exportService';\r\n\r\nconst ExportPanel = ({ isOpen, onClose, ganttData = [] }) => {\r\n  const [activeTab, setActiveTab] = useState('formats');\r\n  const [exportOptions, setExportOptions] = useState({\r\n    includeCompleted: true,\r\n    includePending: true,\r\n    includeInProgress: true,\r\n    specificTasks: [],\r\n    includeFiles: false,\r\n    includeNotes: false,\r\n    customTitle: '',\r\n    watermark: {\r\n      enabled: false,\r\n      text: '',\r\n      opacity: 0.1\r\n    }\r\n  });\r\n  \r\n  const [exportProgress, setExportProgress] = useState({});\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [exportResults, setExportResults] = useState([]);\r\n  const [showAdvanced, setShowAdvanced] = useState(false);\r\n\r\n  // Available tasks for filtering\r\n  const [availableTasks, setAvailableTasks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const data = exportService.getGanttData();\r\n      setAvailableTasks(data);\r\n      \r\n      // Reset state when opening\r\n      setExportResults([]);\r\n      setExportProgress({});\r\n      setIsExporting(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleExportOptionChange = (key, value) => {\r\n    setExportOptions(prev => ({\r\n      ...prev,\r\n      [key]: value\r\n    }));\r\n  };\r\n\r\n  const handleWatermarkChange = (key, value) => {\r\n    setExportOptions(prev => ({\r\n      ...prev,\r\n      watermark: {\r\n        ...prev.watermark,\r\n        [key]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleTaskSelection = (taskId, selected) => {\r\n    setExportOptions(prev => ({\r\n      ...prev,\r\n      specificTasks: selected \r\n        ? [...prev.specificTasks, taskId]\r\n        : prev.specificTasks.filter(id => id !== taskId)\r\n    }));\r\n  };\r\n\r\n  const getExportOptionsForService = () => {\r\n    const options = { ...exportOptions };\r\n    \r\n    // Only include watermark if enabled\r\n    if (!options.watermark.enabled || !options.watermark.text) {\r\n      options.watermark = null;\r\n    }\r\n    \r\n    // Only include specific tasks if any are selected\r\n    if (options.specificTasks.length === 0) {\r\n      options.specificTasks = null;\r\n    }\r\n    \r\n    // Only include custom title if provided\r\n    if (!options.customTitle.trim()) {\r\n      options.customTitle = null;\r\n    }\r\n    \r\n    return options;\r\n  };\r\n\r\n  const performExport = async (exportType) => {\r\n    setIsExporting(true);\r\n    const exportId = `${exportType}_${Date.now()}`;\r\n    \r\n    try {\r\n      // Register progress callback\r\n      exportService.registerProgressCallback(exportId, (progress) => {\r\n        setExportProgress(prev => ({\r\n          ...prev,\r\n          [exportType]: progress\r\n        }));\r\n      });\r\n\r\n      const options = getExportOptionsForService();\r\n      let result;\r\n\r\n      switch (exportType) {\r\n        case 'pdf':\r\n          result = await exportService.exportToPDF(options);\r\n          break;\r\n        case 'excel':\r\n          result = await exportService.exportToExcel(options);\r\n          break;\r\n        case 'powerpoint':\r\n          result = await exportService.exportToPowerPoint(options);\r\n          break;\r\n        case 'json':\r\n          result = await exportService.exportToJSON(options);\r\n          break;\r\n        case 'zip':\r\n          result = await exportService.exportToZIP(options);\r\n          break;\r\n        default:\r\n          throw new Error(`Unknown export type: ${exportType}`);\r\n      }\r\n\r\n      // Update results\r\n      setExportResults(prev => [...prev, {\r\n        type: exportType,\r\n        timestamp: new Date(),\r\n        ...result\r\n      }]);\r\n\r\n      // Clear progress after a delay\r\n      setTimeout(() => {\r\n        setExportProgress(prev => {\r\n          const updated = { ...prev };\r\n          delete updated[exportType];\r\n          return updated;\r\n        });\r\n      }, 2000);\r\n\r\n    } catch (error) {\r\n      console.error(`Export failed for ${exportType}:`, error);\r\n      setExportResults(prev => [...prev, {\r\n        type: exportType,\r\n        timestamp: new Date(),\r\n        success: false,\r\n        error: error.message\r\n      }]);\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const exportFormats = [\r\n    {\r\n      id: 'pdf',\r\n      name: 'PDF',\r\n      description: 'Portable document with timeline table',\r\n      icon: '📄',\r\n      color: 'bg-red-500'\r\n    },\r\n    {\r\n      id: 'excel',\r\n      name: 'Excel',\r\n      description: 'Spreadsheet with timeline and summary',\r\n      icon: '📊',\r\n      color: 'bg-green-500'\r\n    },\r\n    {\r\n      id: 'powerpoint',\r\n      name: 'PowerPoint',\r\n      description: 'Presentation slides with overview',\r\n      icon: '📽️',\r\n      color: 'bg-orange-500'\r\n    },\r\n    {\r\n      id: 'json',\r\n      name: 'JSON',\r\n      description: 'Raw data for import/backup',\r\n      icon: '📋',\r\n      color: 'bg-blue-500'\r\n    },\r\n    {\r\n      id: 'zip',\r\n      name: 'ZIP Archive',\r\n      description: 'Complete export package',\r\n      icon: '📦',\r\n      color: 'bg-purple-500'\r\n    }\r\n  ];\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"bg-gray-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\r\n          <h2 className=\"text-xl font-bold text-gray-900\">Export GANTT Chart</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n            disabled={isExporting}\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-gray-200\">\r\n          <button\r\n            onClick={() => setActiveTab('formats')}\r\n            className={`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === 'formats'\r\n                ? 'border-blue-500 text-blue-600'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700'\r\n            }`}\r\n          >\r\n            Export Formats\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('options')}\r\n            className={`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === 'options'\r\n                ? 'border-blue-500 text-blue-600'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700'\r\n            }`}\r\n          >\r\n            Options\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('results')}\r\n            className={`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === 'results'\r\n                ? 'border-blue-500 text-blue-600'\r\n                : 'border-transparent text-gray-500 hover:text-gray-700'\r\n            }`}\r\n          >\r\n            Results ({exportResults.length})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-200px)]\">\r\n          {/* Export Formats Tab */}\r\n          {activeTab === 'formats' && (\r\n            <div className=\"space-y-4\">\r\n              <p className=\"text-gray-600 mb-6\">\r\n                Select an export format to generate your GANTT chart presentation files.\r\n              </p>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {exportFormats.map((format) => (\r\n                  <div\r\n                    key={format.id}\r\n                    className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n                  >\r\n                    <div className=\"flex items-center mb-3\">\r\n                      <div className={`w-10 h-10 ${format.color} rounded-lg flex items-center justify-center text-white text-lg mr-3`}>\r\n                        {format.icon}\r\n                      </div>\r\n                      <h3 className=\"font-semibold text-gray-900\">{format.name}</h3>\r\n                    </div>\r\n                    \r\n                    <p className=\"text-sm text-gray-600 mb-4\">{format.description}</p>\r\n                    \r\n                    {/* Progress bar */}\r\n                    {exportProgress[format.id] && (\r\n                      <div className=\"mb-3\">\r\n                        <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\r\n                          <span>{exportProgress[format.id].message}</span>\r\n                          <span>{Math.round(exportProgress[format.id].progress)}%</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                          <div\r\n                            className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\r\n                            style={{ width: `${exportProgress[format.id].progress}%` }}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <button\r\n                      onClick={() => performExport(format.id)}\r\n                      disabled={isExporting}\r\n                      className={`w-full py-2 px-4 rounded-md text-sm font-medium transition-colors ${\r\n                        isExporting\r\n                          ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                          : 'bg-blue-500 text-white hover:bg-blue-600'\r\n                      }`}\r\n                    >\r\n                      {exportProgress[format.id] ? 'Exporting...' : `Export ${format.name}`}\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Options Tab */}\r\n          {activeTab === 'options' && (\r\n            <div className=\"space-y-6\">\r\n              {/* Content Filters */}\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Content Filters</h3>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={exportOptions.includeCompleted}\r\n                      onChange={(e) => handleExportOptionChange('includeCompleted', e.target.checked)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    <span className=\"text-sm\">Completed Activities</span>\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={exportOptions.includeInProgress}\r\n                      onChange={(e) => handleExportOptionChange('includeInProgress', e.target.checked)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    <span className=\"text-sm\">In Progress Activities</span>\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={exportOptions.includePending}\r\n                      onChange={(e) => handleExportOptionChange('includePending', e.target.checked)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    <span className=\"text-sm\">Pending Activities</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Task Selection */}\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Task Selection</h3>\r\n                <p className=\"text-sm text-gray-600 mb-3\">\r\n                  Leave unchecked to include all tasks, or select specific tasks to export.\r\n                </p>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-40 overflow-y-auto\">\r\n                  {availableTasks.map((task) => (\r\n                    <label key={task.id} className=\"flex items-center\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={exportOptions.specificTasks.includes(task.id)}\r\n                        onChange={(e) => handleTaskSelection(task.id, e.target.checked)}\r\n                        className=\"mr-2\"\r\n                      />\r\n                      <span className=\"text-sm truncate\">{task.name}</span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Custom Title */}\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Custom Title</h3>\r\n                <input\r\n                  type=\"text\"\r\n                  value={exportOptions.customTitle}\r\n                  onChange={(e) => handleExportOptionChange('customTitle', e.target.value)}\r\n                  placeholder=\"Leave empty to use default title\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Advanced Options */}\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <button\r\n                  onClick={() => setShowAdvanced(!showAdvanced)}\r\n                  className=\"flex items-center justify-between w-full text-left\"\r\n                >\r\n                  <h3 className=\"font-semibold text-gray-900\">Advanced Options</h3>\r\n                  <svg\r\n                    className={`w-5 h-5 transform transition-transform ${showAdvanced ? 'rotate-180' : ''}`}\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                  </svg>\r\n                </button>\r\n                \r\n                {showAdvanced && (\r\n                  <div className=\"mt-4 space-y-4\">\r\n                    {/* Watermark */}\r\n                    <div>\r\n                      <label className=\"flex items-center mb-2\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={exportOptions.watermark.enabled}\r\n                          onChange={(e) => handleWatermarkChange('enabled', e.target.checked)}\r\n                          className=\"mr-2\"\r\n                        />\r\n                        <span className=\"text-sm font-medium\">Add Watermark</span>\r\n                      </label>\r\n                      \r\n                      {exportOptions.watermark.enabled && (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mt-2\">\r\n                          <input\r\n                            type=\"text\"\r\n                            value={exportOptions.watermark.text}\r\n                            onChange={(e) => handleWatermarkChange('text', e.target.value)}\r\n                            placeholder=\"Watermark text\"\r\n                            className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                          />\r\n                          <div>\r\n                            <label className=\"block text-xs text-gray-600 mb-1\">\r\n                              Opacity: {Math.round(exportOptions.watermark.opacity * 100)}%\r\n                            </label>\r\n                            <input\r\n                              type=\"range\"\r\n                              min=\"0.05\"\r\n                              max=\"0.5\"\r\n                              step=\"0.05\"\r\n                              value={exportOptions.watermark.opacity}\r\n                              onChange={(e) => handleWatermarkChange('opacity', parseFloat(e.target.value))}\r\n                              className=\"w-full\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Additional Options */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <label className=\"flex items-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={exportOptions.includeFiles}\r\n                          onChange={(e) => handleExportOptionChange('includeFiles', e.target.checked)}\r\n                          className=\"mr-2\"\r\n                        />\r\n                        <span className=\"text-sm\">Include Associated Files</span>\r\n                      </label>\r\n                      <label className=\"flex items-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={exportOptions.includeNotes}\r\n                          onChange={(e) => handleExportOptionChange('includeNotes', e.target.checked)}\r\n                          className=\"mr-2\"\r\n                        />\r\n                        <span className=\"text-sm\">Include Notes</span>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Results Tab */}\r\n          {activeTab === 'results' && (\r\n            <div className=\"space-y-4\">\r\n              {exportResults.length === 0 ? (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  <svg className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                  </svg>\r\n                  <p>No exports have been generated yet.</p>\r\n                  <p className=\"text-sm\">Switch to the Export Formats tab to begin.</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {exportResults.map((result, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className={`border rounded-lg p-4 ${\r\n                        result.success ? 'border-green-200 bg-green-50' : 'border-red-200 bg-red-50'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm mr-3 ${\r\n                            result.success ? 'bg-green-500' : 'bg-red-500'\r\n                          }`}>\r\n                            {result.success ? '✓' : '✗'}\r\n                          </div>\r\n                          <div>\r\n                            <p className=\"font-medium capitalize\">{result.type} Export</p>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                              {result.timestamp.toLocaleString()}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          {result.success ? (\r\n                            <p className=\"text-sm text-green-600 font-medium\">\r\n                              Downloaded: {result.filename}\r\n                            </p>\r\n                          ) : (\r\n                            <p className=\"text-sm text-red-600\">\r\n                              Error: {result.error}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-between items-center\">\r\n          <div className=\"text-sm text-gray-600\">\r\n            {availableTasks.length} tasks available for export\r\n          </div>\r\n          <div className=\"flex space-x-3\">\r\n            <button\r\n              onClick={onClose}\r\n              disabled={isExporting}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors disabled:opacity-50\"\r\n            >\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExportPanel; ","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport FileTooltip from './FileTooltip';\r\nimport FilePreviewModal from './FilePreviewModal';\r\nimport FileSearch from './FileSearch';\r\nimport ExportPanel from './ExportPanel';\r\n\r\nconst ThesisGanttChart = () => {\r\n  // State for the tooltip/hover details and position\r\n  const [hoveredGateway, setHoveredGateway] = useState(null);\r\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\r\n  \r\n  // State for tracking completed days\r\n  const [completedDays, setCompletedDays] = useState({});\r\n  \r\n  // File-related states\r\n  const [fileTooltip, setFileTooltip] = useState({\r\n    isVisible: false,\r\n    files: [],\r\n    position: { x: 0, y: 0 }\r\n  });\r\n  const [previewFile, setPreviewFile] = useState(null);\r\n  const [showFilePreview, setShowFilePreview] = useState(false);\r\n  const [showFileSearch, setShowFileSearch] = useState(false);\r\n  const [draggedFile, setDraggedFile] = useState(null);\r\n  const [dropTargetActivity, setDropTargetActivity] = useState(null);\r\n  \r\n  // Auto-save states\r\n  const [saveStatus, setSaveStatus] = useState('saved'); // 'saved', 'saving', 'error', 'unsaved'\r\n  const [lastSaveTime, setLastSaveTime] = useState(null);\r\n  const [saveError, setSaveError] = useState(null);\r\n  const [autoSaveEnabled] = useState(true);\r\n  \r\n  // Debounce timer ref\r\n  const saveTimeoutRef = useRef(null);\r\n  const SAVE_DELAY = 2000; // 2 seconds delay for auto-save\r\n  \r\n  // Data compression utilities\r\n  const compressData = useCallback((data) => {\r\n    try {\r\n      // Simple compression: remove unnecessary whitespace and use shorter keys\r\n      const compressed = {\r\n        v: 1, // version\r\n        d: Date.now(), // timestamp\r\n        t: data.map(task => ({\r\n          i: task.id,\r\n          n: task.name,\r\n          a: task.activities.map(activity => ({\r\n            i: activity.id,\r\n            n: activity.name,\r\n            w: activity.weeks,\r\n            d: activity.days,\r\n            o: activity.owner,\r\n            c: activity.color,\r\n            g: activity.isGateway,\r\n            gi: activity.gatewayInfo\r\n          }))\r\n        }))\r\n      };\r\n      return JSON.stringify(compressed);\r\n    } catch (error) {\r\n      return JSON.stringify(data); // Fallback to uncompressed\r\n    }\r\n  }, []);\r\n  \r\n  const decompressData = useCallback((compressedString) => {\r\n    try {\r\n      const data = JSON.parse(compressedString);\r\n      \r\n      // Check if data is compressed (has version field)\r\n      if (data.v === 1 && data.t) {\r\n        return data.t.map(task => ({\r\n          id: task.i,\r\n          name: task.n,\r\n          activities: task.a.map(activity => ({\r\n            id: activity.i,\r\n            name: activity.n,\r\n            weeks: activity.w,\r\n            days: activity.d,\r\n            owner: activity.o,\r\n            color: activity.c,\r\n            isGateway: activity.g,\r\n            gatewayInfo: activity.gi\r\n          }))\r\n        }));\r\n      }\r\n      \r\n      // If not compressed, return as is\r\n      return data;\r\n    } catch (error) {\r\n      // If decompression fails, try parsing as regular JSON\r\n      return JSON.parse(compressedString);\r\n    }\r\n  }, []);\r\n  \r\n  // Enhanced save function with error handling and compression\r\n  const saveState = useCallback(async (taskData) => {\r\n    if (!autoSaveEnabled) return;\r\n    \r\n    setSaveStatus('saving');\r\n    setSaveError(null);\r\n    \r\n    try {\r\n      const compressed = compressData(taskData);\r\n      const storageKey = 'gantt-tasks';\r\n      const backupKey = 'gantt-tasks-backup';\r\n      \r\n      // Check storage limit\r\n      const testKey = 'storage-test';\r\n      try {\r\n        localStorage.setItem(testKey, compressed);\r\n        localStorage.removeItem(testKey);\r\n      } catch (storageError) {\r\n        throw new Error('Storage limit exceeded. Please clear some browser data.');\r\n      }\r\n      \r\n      // Create backup of current data before saving new\r\n      const currentData = localStorage.getItem(storageKey);\r\n      if (currentData) {\r\n        localStorage.setItem(backupKey, currentData);\r\n      }\r\n      \r\n      // Save new data\r\n      localStorage.setItem(storageKey, compressed);\r\n      localStorage.setItem('gantt-save-timestamp', Date.now().toString());\r\n      \r\n      setSaveStatus('saved');\r\n      setLastSaveTime(new Date());\r\n      \r\n    } catch (error) {\r\n      setSaveStatus('error');\r\n      setSaveError(error.message);\r\n      // In case of error, restore from backup if available\r\n      const backup = localStorage.getItem('gantt-tasks-backup');\r\n      if (backup) {\r\n        localStorage.setItem('gantt-tasks', backup);\r\n      }\r\n    }\r\n  }, [autoSaveEnabled, compressData]);\r\n  \r\n  // Debounced save function\r\n  const debouncedSave = useCallback((taskData) => {\r\n    if (saveTimeoutRef.current) {\r\n      clearTimeout(saveTimeoutRef.current);\r\n    }\r\n    \r\n    setSaveStatus('unsaved');\r\n    \r\n    saveTimeoutRef.current = setTimeout(() => {\r\n      saveState(taskData);\r\n    }, SAVE_DELAY);\r\n  }, [saveState]);\r\n\r\n  // State for instruction modal\r\n  const [showInstructions, setShowInstructions] = useState(false);\r\n  \r\n  // State for export panel\r\n  const [showExportPanel, setShowExportPanel] = useState(false);\r\n  \r\n  // State for row editing functionality\r\n  const [editingRow, setEditingRow] = useState(null); // { type: 'task'|'activity', id: number, originalName: string }\r\n  const [editValue, setEditValue] = useState('');\r\n  const [showEditFeedback, setShowEditFeedback] = useState({ show: false, message: '', type: '' });\r\n  \r\n  // State for add row functionality\r\n  const [showAddRowModal, setShowAddRowModal] = useState(false);\r\n  const [addRowType, setAddRowType] = useState('task'); // 'task' or 'activity'\r\n  const [addRowData, setAddRowData] = useState({\r\n    name: '',\r\n    parentTaskId: null,\r\n    weeks: [],\r\n    days: [],\r\n    owner: 'ME',\r\n    color: 'bg-blue-400',\r\n    isGateway: false\r\n  });\r\n  const [draggedItem, setDraggedItem] = useState(null);\r\n  const [dragOverItem, setDragOverItem] = useState(null);\r\n\r\n  // State for enhanced deletion functionality\r\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState(false);\r\n  const [deleteConfirmationData, setDeleteConfirmationData] = useState(null);\r\n  const [deletedItemsHistory, setDeletedItemsHistory] = useState([]);\r\n  const [showUndoNotification, setShowUndoNotification] = useState(false);\r\n  \r\n  // Refs for inputs\r\n  const editInputRef = useRef(null);\r\n  const addRowInputRef = useRef(null);\r\n  \r\n  // Project timeframe: June 1 - September 1, 2024\r\n  // Calculate weeks in the project (June, July, August)\r\n  const weeks = [\r\n    { name: \"JUN 1-7\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUN 8-14\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUN 15-21\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUN 22-28\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUN 29-JUL 5\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUL 6-12\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUL 13-19\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUL 20-26\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"JUL 27-AUG 2\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"AUG 3-9\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"AUG 10-16\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"AUG 17-23\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"AUG 24-30\", days: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"] },\r\n    { name: \"AUG 31-SEP 1\", days: [\"S\", \"M\", \"-\", \"-\", \"-\", \"-\", \"-\"] },\r\n  ];\r\n\r\n  // Task structure with timing in weeks - moved to state for editing\r\n  const [tasks, setTasks] = useState([\r\n    {\r\n      id: 1,\r\n      name: \"PLANNING\",\r\n      activities: [\r\n        { \r\n          id: 1.1, \r\n          name: \"Confirm topic & objectives\", \r\n          weeks: [0], \r\n          days: [1, 2, 3], \r\n          owner: \"ME\",\r\n          files: [\r\n            {\r\n              name: \"thesis-proposal-draft.pdf\",\r\n              type: \"pdf\",\r\n              size: 2048576,\r\n              uploadDate: \"2024-06-01\",\r\n              description: \"Initial thesis proposal draft\",\r\n              tags: [\"proposal\", \"draft\"],\r\n              url: \"#\"\r\n            },\r\n            {\r\n              name: \"research-objectives.pdf\",\r\n              type: \"pdf\", \r\n              size: 512000,\r\n              uploadDate: \"2024-06-02\",\r\n              description: \"Detailed research objectives document\",\r\n              tags: [\"objectives\", \"research\"],\r\n              url: \"#\"\r\n            }\r\n          ],\r\n          color: \"bg-blue-400\",\r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 1.2, \r\n          name: \"Write research proposal\", \r\n          weeks: [0, 1], \r\n          days: [4, 5, 6, 0, 1], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-blue-400\",\r\n          isGateway: true,\r\n          gatewayInfo: {\r\n            name: \"Research Proposal Approved\",\r\n            deliverables: [\"Approved research topic\", \"Research objectives defined\", \"Initial literature survey\", \"Methodology outline\"],\r\n            nextSteps: \"Proceed to detailed research and prototype development\"\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"PROTOTYPE DEVELOPMENT\",\r\n      activities: [\r\n        { \r\n          id: 2.1, \r\n          name: \"Requirements gathering\", \r\n          weeks: [0, 1], \r\n          days: [1, 2, 3, 4, 5, 6, 0], \r\n          owner: \"ME\",\r\n          files: [\r\n            {\r\n              name: \"requirements-notes.m4a\",\r\n              type: \"m4a\",\r\n              size: 5242880,\r\n              uploadDate: \"2024-06-03\",\r\n              description: \"Voice notes from stakeholder interviews\",\r\n              tags: [\"requirements\", \"interviews\", \"audio\"],\r\n              url: \"#\"\r\n            }\r\n          ],\r\n          color: \"bg-purple-400\",\r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 2.2, \r\n          name: \"Design phase\", \r\n          weeks: [1, 2], \r\n          days: [1, 2, 3, 4, 5, 6, 0, 1, 2, 3], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-purple-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 2.3, \r\n          name: \"Test development (TDD)\", \r\n          weeks: [2, 3], \r\n          days: [4, 5, 6, 0, 1, 2, 3], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-purple-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 2.4, \r\n          name: \"Implementation (Agile sprints)\", \r\n          weeks: [3, 4, 5, 6], \r\n          days: [4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3], \r\n          owner: \"ME\",\r\n          files: [\r\n            {\r\n              name: \"sprint-planning-notes.wav\",\r\n              type: \"wav\",\r\n              size: 8388608,\r\n              uploadDate: \"2024-07-01\",\r\n              description: \"Sprint planning meeting recording\",\r\n              tags: [\"sprint\", \"planning\", \"agile\"],\r\n              url: \"#\"\r\n            },\r\n            {\r\n              name: \"implementation-demo.mp3\",\r\n              type: \"mp3\",\r\n              size: 6291456,\r\n              uploadDate: \"2024-07-15\",\r\n              description: \"Demo recording of prototype implementation\",\r\n              tags: [\"demo\", \"prototype\", \"implementation\"],\r\n              url: \"#\"\r\n            }\r\n          ],\r\n          color: \"bg-purple-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 2.5, \r\n          name: \"DevOps implementation\", \r\n          weeks: [6, 7, 8], \r\n          days: [4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-indigo-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 2.6, \r\n          name: \"Test and debug prototype\", \r\n          weeks: [8, 9, 10], \r\n          days: [1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-indigo-400\", \r\n          isGateway: true,\r\n          gatewayInfo: {\r\n            name: \"Functional Prototype Complete\",\r\n            deliverables: [\"Working AI-powered CSV to CSA transition tool\", \"Test documentation\", \"Performance metrics\", \"Comparison with traditional methods\"],\r\n            nextSteps: \"Begin evaluation and data analysis phase\"\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"RESEARCH & WRITING\",\r\n      activities: [\r\n        { \r\n          id: 3.1, \r\n          name: \"Background reading/literature review\", \r\n          weeks: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13], \r\n          days: [1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0], // Ongoing throughout project\r\n          owner: \"ME\",\r\n          files: [\r\n            {\r\n              name: \"literature-review-sources.pdf\",\r\n              type: \"pdf\",\r\n              size: 1048576,\r\n              uploadDate: \"2024-06-05\",\r\n              description: \"Compiled literature review sources and summaries\",\r\n              tags: [\"literature\", \"sources\", \"research\"],\r\n              url: \"#\"\r\n            },\r\n            {\r\n              name: \"csv-csa-comparison.pdf\",\r\n              type: \"pdf\",\r\n              size: 3145728,\r\n              uploadDate: \"2024-06-10\",\r\n              description: \"Detailed comparison between CSV and CSA approaches\",\r\n              tags: [\"csv\", \"csa\", \"comparison\"],\r\n              url: \"#\"\r\n            },\r\n            {\r\n              name: \"ai-validation-research.pdf\",\r\n              type: \"pdf\",\r\n              size: 2097152,\r\n              uploadDate: \"2024-06-15\",\r\n              description: \"Research on AI applications in validation processes\",\r\n              tags: [\"ai\", \"validation\", \"research\"],\r\n              url: \"#\"\r\n            }\r\n          ],\r\n          color: \"bg-green-300\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 3.2, \r\n          name: \"Write Chapter 1: Introduction\", \r\n          weeks: [1, 2], \r\n          days: [0, 1, 2, 3, 4, 5, 6, 0], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-pink-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 3.3, \r\n          name: \"Write Chapter 2: Literature Review\", \r\n          weeks: [2, 3, 4], \r\n          days: [1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-pink-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 3.4, \r\n          name: \"Write Chapter 3: Methodology\", \r\n          weeks: [4, 5], \r\n          days: [1, 2, 3, 4, 5, 6, 0, 1, 2, 3], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-pink-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 3.5, \r\n          name: \"Conduct surveys (LinkedIn/email)\", \r\n          weeks: [5, 6, 7, 8], \r\n          days: [4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-green-400\", \r\n          isGateway: true,\r\n          gatewayInfo: {\r\n            name: \"Survey Data Collection Complete\",\r\n            deliverables: [\"Expert feedback on CSV to CSA transition\", \"Industry professional perspectives\", \"Market validation of AI approach\", \"Data for quantitative analysis\"],\r\n            nextSteps: \"Analyze data and incorporate findings into thesis\"\r\n          }\r\n        },\r\n        { \r\n          id: 3.6, \r\n          name: \"Write Chapter 4: Findings & Analysis\", \r\n          weeks: [8, 9, 10], \r\n          days: [4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-pink-400\", \r\n          isGateway: false\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 4,\r\n      name: \"EVALUATION & FINALIZATION\",\r\n      activities: [\r\n        { \r\n          id: 4.1, \r\n          name: \"Mid-project supervisor review\", \r\n          weeks: [6], \r\n          days: [3, 4, 5], \r\n          owner: \"SV\",\r\n          files: [],\r\n          color: \"bg-red-400\", \r\n          isGateway: true,\r\n          gatewayInfo: {\r\n            name: \"Mid-Project Supervisor Review\",\r\n            deliverables: [\"Progress report\", \"Initial findings\", \"Prototype development status\", \"Timeline adherence assessment\"],\r\n            nextSteps: \"Address feedback and continue with implementation\"\r\n          }\r\n        },\r\n        { \r\n          id: 4.2, \r\n          name: \"SME evaluation of reports\", \r\n          weeks: [10, 11], \r\n          days: [1, 2, 3, 4, 5, 6, 0], \r\n          owner: \"SME\",\r\n          files: [],\r\n          color: \"bg-purple-300\", \r\n          isGateway: true,\r\n          gatewayInfo: {\r\n            name: \"Subject Matter Expert Evaluation\",\r\n            deliverables: [\"Expert validation of AI approach\", \"Industry relevance assessment\", \"Technical accuracy confirmation\", \"Implementation recommendations\"],\r\n            nextSteps: \"Incorporate expert feedback into final chapters\"\r\n          }\r\n        },\r\n        { \r\n          id: 4.3, \r\n          name: \"Write Chapter 5: Conclusions\", \r\n          weeks: [11, 12], \r\n          days: [1, 2, 3, 4, 5, 6, 0], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-pink-400\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 4.4, \r\n          name: \"Compile references & appendices\", \r\n          weeks: [12], \r\n          days: [1, 2, 3], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-blue-300\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 4.5, \r\n          name: \"Write abstract\", \r\n          weeks: [12], \r\n          days: [4, 5], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-blue-300\", \r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 4.6, \r\n          name: \"Final review and submission\", \r\n          weeks: [12, 13], \r\n          days: [6, 0, 1], \r\n          owner: \"ME\",\r\n          files: [],\r\n          color: \"bg-blue-300\", \r\n          isGateway: true,\r\n          gatewayInfo: {\r\n            name: \"Thesis Submission Complete\",\r\n            deliverables: [\"Complete thesis document\", \"Functional AI prototype\", \"All appendices and references\", \"Executive summary\"],\r\n            nextSteps: \"Prepare for viva and demonstration\"\r\n          }\r\n        },\r\n        { \r\n          id: 4.7, \r\n          name: \"Viva preparation\", \r\n          weeks: [13], \r\n          days: [0, 1], \r\n          owner: \"ME\",\r\n          color: \"bg-blue-300\", \r\n          isGateway: false\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 5,\r\n      name: \"PRIMARY DATA COLLECTION\",\r\n      activities: [\r\n        { \r\n          id: 5.1, \r\n          name: \"Create data collection plan for the prototype\", \r\n          weeks: [9], \r\n          days: [1, 2, 3], \r\n          owner: \"ME\",\r\n          color: \"bg-orange-400\",\r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 5.2, \r\n          name: \"Create data collection plan for interviews\", \r\n          weeks: [9], \r\n          days: [4, 5, 6], \r\n          owner: \"ME\",\r\n          color: \"bg-orange-400\",\r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 5.3, \r\n          name: \"Create questions for interviews\", \r\n          weeks: [9, 10], \r\n          days: [0, 1, 2], \r\n          owner: \"ME\",\r\n          color: \"bg-orange-400\",\r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 5.4, \r\n          name: \"Collect data from the prototype\", \r\n          weeks: [10, 11], \r\n          days: [3, 4, 5, 6, 0, 1, 2], \r\n          owner: \"ME\",\r\n          color: \"bg-orange-500\",\r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 5.5, \r\n          name: \"Collect data from the interviews\", \r\n          weeks: [11], \r\n          days: [3, 4, 5, 6], \r\n          owner: \"ME\",\r\n          color: \"bg-orange-500\",\r\n          isGateway: false\r\n        },\r\n        { \r\n          id: 5.6, \r\n          name: \"Analyze primary data\", \r\n          weeks: [11, 12], \r\n          days: [0, 1, 2, 3, 4], \r\n          owner: \"ME\",\r\n          color: \"bg-orange-600\",\r\n          isGateway: true,\r\n          gatewayInfo: {\r\n            name: \"Primary Data Analysis Complete\",\r\n            deliverables: [\"Prototype performance data\", \"Interview findings\", \"Data analysis results\", \"Key insights for thesis\"],\r\n            nextSteps: \"Incorporate findings into thesis conclusions\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ]);\r\n\r\n  // Manual save function\r\n  const manualSave = useCallback(() => {\r\n    if (saveTimeoutRef.current) {\r\n      clearTimeout(saveTimeoutRef.current);\r\n    }\r\n    saveState(tasks);\r\n  }, [saveState, tasks]);\r\n  \r\n  // Recovery mechanism\r\n  const recoverUnsavedChanges = useCallback(() => {\r\n    try {\r\n      const backup = localStorage.getItem('gantt-tasks-backup');\r\n      if (backup) {\r\n        const recoveredTasks = decompressData(backup);\r\n        setTasks(recoveredTasks);\r\n        setSaveStatus('saved');\r\n        alert('Unsaved changes have been recovered from backup.');\r\n      }\r\n    } catch (error) {\r\n      alert('Failed to recover backup data.');\r\n    }\r\n  }, [decompressData]);\r\n  \r\n  // Load tasks on component mount\r\n  useEffect(() => {\r\n    const savedTasks = localStorage.getItem('gantt-tasks');\r\n    if (savedTasks) {\r\n      try {\r\n        const decompressed = decompressData(savedTasks);\r\n        setTasks(decompressed);\r\n        setSaveStatus('saved');\r\n        \r\n        const saveTimestamp = localStorage.getItem('gantt-save-timestamp');\r\n        if (saveTimestamp) {\r\n          setLastSaveTime(new Date(parseInt(saveTimestamp)));\r\n        }\r\n      } catch (error) {\r\n        setSaveError('Error loading saved tasks: ' + error.message);\r\n        // Check if backup is available\r\n        const backup = localStorage.getItem('gantt-tasks-backup');\r\n        if (backup) {\r\n          if (window.confirm('Failed to load main data. Would you like to recover from backup?')) {\r\n            recoverUnsavedChanges();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [decompressData, recoverUnsavedChanges]);\r\n  \r\n  // Auto-save tasks when they change\r\n  useEffect(() => {\r\n    if (tasks.length > 0) {\r\n      debouncedSave(tasks);\r\n    }\r\n  }, [tasks, debouncedSave]);\r\n\r\n  // Owner information\r\n  const owners = {\r\n    \"ME\": \"Daniil Vladimirov (Thesis Author)\",\r\n    \"SV\": \"Supervisor\",\r\n    \"SME\": \"Subject Matter Expert\"\r\n  };\r\n\r\n  // Load completed days from localStorage on initial render\r\n  useEffect(() => {\r\n    const savedCompletedDays = localStorage.getItem('thesisGanttCompletedDays');\r\n    if (savedCompletedDays) {\r\n      setCompletedDays(JSON.parse(savedCompletedDays));\r\n    }\r\n    \r\n    // Check if this is the first visit\r\n    const hasVisitedBefore = localStorage.getItem('thesisGanttVisited');\r\n    if (!hasVisitedBefore) {\r\n      setShowInstructions(true);\r\n      localStorage.setItem('thesisGanttVisited', 'true');\r\n    }\r\n  }, []);\r\n\r\n  // Save completed days to localStorage whenever it changes\r\n  useEffect(() => {\r\n    localStorage.setItem('thesisGanttCompletedDays', JSON.stringify(completedDays));\r\n  }, [completedDays]);\r\n\r\n  // Function to toggle completion status of a day\r\n  const toggleDayCompletion = (activityId, weekIndex, dayIndex) => {\r\n    const dayKey = `${activityId}-${weekIndex}-${dayIndex}`;\r\n    \r\n    setCompletedDays(prevState => {\r\n      const newState = { ...prevState };\r\n      \r\n      // Toggle completed status\r\n      if (newState[dayKey]) {\r\n        delete newState[dayKey];\r\n      } else {\r\n        newState[dayKey] = true;\r\n      }\r\n      \r\n      return newState;\r\n    });\r\n  };\r\n\r\n  // Calculate progress for an activity\r\n  const calculateActivityProgress = (activity) => {\r\n    let totalDays = 0;\r\n    let completedDaysCount = 0;\r\n    \r\n    // First, identify all days that are part of this activity\r\n    const activityDays = [];\r\n    \r\n    // For each week in the activity's span\r\n    for (let w = 0; w < activity.weeks.length; w++) {\r\n      const weekIndex = activity.weeks[w];\r\n      \r\n      // Determine the start and end days for this week\r\n      let startDay, endDay;\r\n      \r\n      if (w === 0) {\r\n        // If this is the first week, start from the specified first day\r\n        startDay = activity.days[0];\r\n      } else {\r\n        // Otherwise start from the beginning of the week\r\n        startDay = 0;\r\n      }\r\n      \r\n      if (w === activity.weeks.length - 1) {\r\n        // If this is the last week, end at the specified last day\r\n        endDay = activity.days[activity.days.length - 1];\r\n      } else {\r\n        // Otherwise end at the end of the week\r\n        endDay = 6;\r\n      }\r\n      \r\n      // Add each day in this week to our activity days\r\n      for (let dayIndex = startDay; dayIndex <= endDay; dayIndex++) {\r\n        // Skip non-existent days in the last week\r\n        if (weekIndex === 13 && dayIndex > 1) continue;\r\n        \r\n        activityDays.push({\r\n          weekIndex,\r\n          dayIndex\r\n        });\r\n      }\r\n    }\r\n    \r\n    // Now count the total days and completed days\r\n    totalDays = activityDays.length;\r\n    \r\n    // Check each day to see if it's completed\r\n    activityDays.forEach(({ weekIndex, dayIndex }) => {\r\n      const dayKey = `${activity.id}-${weekIndex}-${dayIndex}`;\r\n      if (completedDays[dayKey]) {\r\n        completedDaysCount++;\r\n      }\r\n    });\r\n    \r\n    return totalDays > 0 ? (completedDaysCount / totalDays) * 100 : 0;\r\n  };\r\n\r\n  // Helper function to determine if a day is part of an activity\r\n  const isDayInActivity = (activity, weekIndex, dayIndex) => {\r\n    if (!activity.weeks.includes(weekIndex)) return false;\r\n    \r\n    // First week of activity\r\n    if (weekIndex === activity.weeks[0]) {\r\n      return dayIndex >= activity.days[0];\r\n    }\r\n    // Last week of activity\r\n    else if (weekIndex === activity.weeks[activity.weeks.length - 1]) {\r\n      return dayIndex <= activity.days[activity.days.length - 1];\r\n    }\r\n    // Weeks in between\r\n    else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  // Render a cell for a particular week and day\r\n  const renderCell = (weekIndex, dayIndex, activity) => {\r\n    // Skip non-existent days in the last week\r\n    if (weekIndex === 13 && dayIndex > 1) {\r\n      return <td key={`${weekIndex}-${dayIndex}-${activity.id}`} className=\"bg-white border border-gray-200 w-6 h-6\"></td>;\r\n    }\r\n    \r\n    // Check if this day is part of the activity\r\n    const isActiveDay = isDayInActivity(activity, weekIndex, dayIndex);\r\n    \r\n    // Handle first or last day of an activity\r\n    const isFirstDay = weekIndex === activity.weeks[0] && dayIndex === activity.days[0];\r\n    const isLastDay = weekIndex === activity.weeks[activity.weeks.length-1] && dayIndex === activity.days[activity.days.length-1];\r\n    \r\n    // Check if this is a gateway (last cell of a gateway activity)\r\n    const isGatewayCell = activity.isGateway && isLastDay;\r\n    \r\n    // Check if this day is completed\r\n    const dayKey = `${activity.id}-${weekIndex}-${dayIndex}`;\r\n    const isCompleted = completedDays[dayKey];\r\n    \r\n    // File-related checks for Task 13\r\n    const activityHasFiles = hasFiles(activity);\r\n    const fileCount = getFileCount(activity);\r\n    const isDropTarget = dropTargetActivity === activity.id;\r\n    \r\n    // Determine the cell color\r\n    let cellColor = 'bg-white';\r\n    \r\n    if (isActiveDay) {\r\n      if (isCompleted) {\r\n        cellColor = 'bg-gray-400'; // Completed tasks are gray\r\n      } else if (isGatewayCell) {\r\n        cellColor = 'bg-amber-500'; // Gateway color\r\n      } else {\r\n        cellColor = activity.color; // Normal activity color\r\n      }\r\n    }\r\n    \r\n    // Handler functions for mouse events\r\n    const handleMouseEnter = (e) => {\r\n      if (isGatewayCell) {\r\n        const rect = e.currentTarget.getBoundingClientRect();\r\n        const centerX = window.pageXOffset + rect.left + rect.width/2;\r\n        const bottomY = window.pageYOffset + rect.bottom;\r\n        \r\n        setTooltipPosition({ x: centerX, y: bottomY });\r\n        setHoveredGateway(activity.gatewayInfo);\r\n      } else if (isActiveDay && activityHasFiles) {\r\n        // Show file tooltip on hover for activities with files\r\n        handleFileTooltipShow(e, activity);\r\n      }\r\n    };\r\n    \r\n    const handleMouseLeave = () => {\r\n      if (isGatewayCell) {\r\n        setHoveredGateway(null);\r\n      } else if (isActiveDay && activityHasFiles) {\r\n        handleFileTooltipHide();\r\n      }\r\n    };\r\n    \r\n    // Click handler for toggling completion\r\n    const handleClick = () => {\r\n      if (isActiveDay) {\r\n        toggleDayCompletion(activity.id, weekIndex, dayIndex);\r\n      }\r\n    };\r\n    \r\n    return (\r\n      <td \r\n        key={`${weekIndex}-${dayIndex}-${activity.id}`} \r\n        className={`border border-gray-200 w-6 h-6 relative\r\n          ${cellColor} \r\n          ${isFirstDay ? 'rounded-l' : ''} \r\n          ${isLastDay ? 'rounded-r' : ''}\r\n          ${isActiveDay ? 'cursor-pointer hover:opacity-80' : ''}\r\n          ${isDropTarget ? 'ring-2 ring-blue-400 ring-opacity-75' : ''}`\r\n        }\r\n        onMouseEnter={handleMouseEnter}\r\n        onMouseLeave={handleMouseLeave}\r\n        onClick={handleClick}\r\n        onDragEnter={(e) => isActiveDay && handleFileDragEnter(e, activity.id)}\r\n        onDragOver={(e) => isActiveDay && handleFileDragOver(e)}\r\n        onDragLeave={(e) => isActiveDay && handleFileDragLeave(e)}\r\n        onDrop={(e) => isActiveDay && handleFileDrop(e, activity.id)}\r\n      >\r\n        {/* Completion checkmark */}\r\n        {isCompleted && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center z-10\">\r\n            <svg className=\"w-3 h-3 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\"></path>\r\n            </svg>\r\n          </div>\r\n        )}\r\n        \r\n        {/* File count indicator - Task 13 feature */}\r\n        {isActiveDay && activityHasFiles && isFirstDay && (\r\n          <div className=\"absolute -top-1 -right-1 z-20\">\r\n            <div className=\"bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center text-center leading-none font-bold\">\r\n              {fileCount > 9 ? '9+' : fileCount}\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* File icon indicator for activities with files - Task 13 feature */}\r\n        {isActiveDay && activityHasFiles && !isCompleted && (\r\n          <div className=\"absolute bottom-0 left-0 z-10\">\r\n            <svg className=\"w-2 h-2 text-white opacity-80\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path d=\"M4 4v12h12V8l-4-4H4zm8 0v3h3l-3-3z\"/>\r\n            </svg>\r\n          </div>\r\n        )}\r\n      </td>\r\n    );\r\n  };\r\n\r\n  // Row editing functions\r\n  const startEditing = (type, id, currentName) => {\r\n    setEditingRow({ type, id, originalName: currentName });\r\n    setEditValue(currentName);\r\n    setShowEditFeedback({ show: false, message: '', type: '' });\r\n  };\r\n\r\n  const cancelEditing = () => {\r\n    setEditingRow(null);\r\n    setEditValue('');\r\n    setShowEditFeedback({ show: false, message: '', type: '' });\r\n  };\r\n\r\n  const validateEditValue = (value) => {\r\n    const trimmedValue = value.trim();\r\n    if (!trimmedValue) {\r\n      return { isValid: false, message: 'Name cannot be empty' };\r\n    }\r\n    if (trimmedValue.length > 100) {\r\n      return { isValid: false, message: 'Name must be 100 characters or less' };\r\n    }\r\n    return { isValid: true, message: '' };\r\n  };\r\n\r\n  const saveEdit = () => {\r\n    const validation = validateEditValue(editValue);\r\n    \r\n    if (!validation.isValid) {\r\n      setShowEditFeedback({ \r\n        show: true, \r\n        message: validation.message, \r\n        type: 'error' \r\n      });\r\n      return;\r\n    }\r\n\r\n    const trimmedValue = editValue.trim();\r\n    \r\n    if (trimmedValue === editingRow.originalName) {\r\n      // No changes made, just cancel\r\n      cancelEditing();\r\n      return;\r\n    }\r\n\r\n    // Update the tasks state\r\n    setTasks(prevTasks => {\r\n      return prevTasks.map(task => {\r\n        if (editingRow.type === 'task' && task.id === editingRow.id) {\r\n          return { ...task, name: trimmedValue };\r\n        } else if (editingRow.type === 'activity') {\r\n          return {\r\n            ...task,\r\n            activities: task.activities.map(activity => {\r\n              if (activity.id === editingRow.id) {\r\n                return { ...activity, name: trimmedValue };\r\n              }\r\n              return activity;\r\n            })\r\n          };\r\n        }\r\n        return task;\r\n      });\r\n    });\r\n\r\n    // Show success feedback\r\n    setShowEditFeedback({ \r\n      show: true, \r\n      message: 'Name updated successfully!', \r\n      type: 'success' \r\n    });\r\n\r\n    // Clear editing state after short delay\r\n    setTimeout(() => {\r\n      cancelEditing();\r\n    }, 1500);\r\n  };\r\n\r\n  const handleEditKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      saveEdit();\r\n    } else if (e.key === 'Escape') {\r\n      e.preventDefault();\r\n      cancelEditing();\r\n    }\r\n  };\r\n\r\n  // Focus input when editing starts\r\n  useEffect(() => {\r\n    if (editingRow && editInputRef.current) {\r\n      editInputRef.current.focus();\r\n      editInputRef.current.select();\r\n    }\r\n  }, [editingRow]);\r\n\r\n  // Load tasks from localStorage on mount\r\n  // Note: Loading and saving are now handled by the enhanced auto-save system above\r\n\r\n  // Generate unique task ID\r\n  const generateUniqueTaskId = () => {\r\n    const existingIds = tasks.map(task => task.id);\r\n    let newId = Math.max(...existingIds, 0) + 1;\r\n    while (existingIds.includes(newId)) {\r\n      newId++;\r\n    }\r\n    return newId;\r\n  };\r\n  \r\n  // Generate unique activity ID for a task\r\n  const generateUniqueActivityId = (taskId) => {\r\n    const task = tasks.find(t => t.id === taskId);\r\n    if (!task) return `${taskId}.1`;\r\n    \r\n    const existingActivityIds = task.activities.map(activity => \r\n      parseFloat(activity.id.toString().split('.')[1] || '0')\r\n    );\r\n    const nextActivityId = Math.max(...existingActivityIds, 0) + 1;\r\n    return parseFloat(`${taskId}.${nextActivityId}`);\r\n  };\r\n  \r\n  // Add new task\r\n  const addNewTask = (taskData) => {\r\n    const newId = generateUniqueTaskId();\r\n    const newTask = {\r\n      id: newId,\r\n      name: taskData.name || `New Task ${newId}`,\r\n      activities: []\r\n    };\r\n    \r\n    setTasks(prevTasks => {\r\n      const newTasks = [...prevTasks, newTask];\r\n      showEditFeedbackMessage(`Task \"${newTask.name}\" added successfully!`, 'success');\r\n      return newTasks;\r\n    });\r\n    \r\n    return newId;\r\n  };\r\n  \r\n  // Add new activity to existing task\r\n  const addNewActivity = (activityData) => {\r\n    const { parentTaskId, name, weeks, days, owner, color, isGateway } = activityData;\r\n    const newActivityId = generateUniqueActivityId(parentTaskId);\r\n    \r\n    const newActivity = {\r\n      id: newActivityId,\r\n      name: name || `New Activity ${newActivityId}`,\r\n      weeks: weeks || [0],\r\n      days: days || [1, 2, 3],\r\n      owner: owner || 'ME',\r\n      color: color || 'bg-blue-400',\r\n      isGateway: isGateway || false\r\n    };\r\n    \r\n    setTasks(prevTasks => {\r\n      const newTasks = prevTasks.map(task => {\r\n        if (task.id === parentTaskId) {\r\n          return {\r\n            ...task,\r\n            activities: [...task.activities, newActivity]\r\n          };\r\n        }\r\n        return task;\r\n      });\r\n      showEditFeedbackMessage(`Activity \"${newActivity.name}\" added successfully!`, 'success');\r\n      return newTasks;\r\n    });\r\n    \r\n    return newActivityId;\r\n  };\r\n  \r\n  // Handle add row submission\r\n  const handleAddRow = () => {\r\n    if (!addRowData.name.trim()) {\r\n      showEditFeedbackMessage('Please enter a name for the new row.', 'error');\r\n      return;\r\n    }\r\n    \r\n    if (addRowType === 'task') {\r\n      addNewTask(addRowData);\r\n    } else if (addRowType === 'activity' && addRowData.parentTaskId) {\r\n      addNewActivity(addRowData);\r\n    } else {\r\n      showEditFeedbackMessage('Please select a parent task for the new activity.', 'error');\r\n      return;\r\n    }\r\n    \r\n    // Reset form\r\n    setAddRowData({\r\n      name: '',\r\n      parentTaskId: null,\r\n      weeks: [],\r\n      days: [],\r\n      owner: 'ME',\r\n      color: 'bg-blue-400',\r\n      isGateway: false\r\n    });\r\n    setShowAddRowModal(false);\r\n  };\r\n  \r\n  // Handle drag start\r\n  const handleDragStart = (e, item, type) => {\r\n    setDraggedItem({ ...item, type });\r\n    e.dataTransfer.effectAllowed = 'move';\r\n  };\r\n  \r\n  // Handle drag over\r\n  const handleDragOver = (e, item, type) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'move';\r\n    setDragOverItem({ ...item, type });\r\n  };\r\n  \r\n  // Handle drop\r\n  const handleDrop = (e, targetItem, targetType) => {\r\n    e.preventDefault();\r\n    \r\n    if (!draggedItem || !targetItem) return;\r\n    \r\n    // Implement repositioning logic here\r\n    if (draggedItem.type === 'task' && targetType === 'task') {\r\n      // Reorder tasks\r\n      const draggedIndex = tasks.findIndex(task => task.id === draggedItem.id);\r\n      const targetIndex = tasks.findIndex(task => task.id === targetItem.id);\r\n      \r\n      if (draggedIndex !== targetIndex) {\r\n        const newTasks = [...tasks];\r\n        const [removed] = newTasks.splice(draggedIndex, 1);\r\n        newTasks.splice(targetIndex, 0, removed);\r\n        setTasks(newTasks);\r\n        showEditFeedbackMessage('Task repositioned successfully!', 'success');\r\n      }\r\n    }\r\n    \r\n    setDraggedItem(null);\r\n    setDragOverItem(null);\r\n  };\r\n  \r\n  // Helper function to show feedback messages\r\n  const showEditFeedbackMessage = (message, type) => {\r\n    setShowEditFeedback({ show: true, message, type });\r\n    setTimeout(() => {\r\n      setShowEditFeedback({ show: false, message: '', type: '' });\r\n    }, 3000);\r\n  };\r\n\r\n  // Dependency validation functions\r\n  const findDependentActivities = (taskId, activityId = null) => {\r\n    const dependents = [];\r\n    \r\n    tasks.forEach(task => {\r\n      task.activities.forEach(activity => {\r\n        // Skip the activity being deleted\r\n        if (activityId && activity.id === activityId && task.id === taskId) return;\r\n        \r\n        // Check if this activity depends on the task/activity being deleted\r\n        if (activityId) {\r\n          // Check for activity-level dependencies (temporal relationships)\r\n          const deletingActivity = tasks.find(t => t.id === taskId)?.activities.find(a => a.id === activityId);\r\n          if (deletingActivity && hasTimeDependency(deletingActivity, activity)) {\r\n            dependents.push({ task: task.name, activity: activity.name, type: 'temporal' });\r\n          }\r\n        } else {\r\n          // Check for task-level dependencies\r\n          if (task.id !== taskId && hasTaskDependency(taskId, task)) {\r\n            dependents.push({ task: task.name, activity: activity.name, type: 'task' });\r\n          }\r\n        }\r\n      });\r\n    });\r\n    \r\n    return dependents;\r\n  };\r\n\r\n  const hasTimeDependency = (sourceActivity, targetActivity) => {\r\n    // Check if target activity starts after source activity ends (temporal dependency)\r\n    const sourceEndWeek = Math.max(...sourceActivity.weeks);\r\n    const targetStartWeek = Math.min(...targetActivity.weeks);\r\n    return targetStartWeek > sourceEndWeek;\r\n  };\r\n\r\n  const hasTaskDependency = (sourceTaskId, targetTask) => {\r\n    // Check if target task has activities that temporally depend on source task activities\r\n    const sourceTask = tasks.find(t => t.id === sourceTaskId);\r\n    if (!sourceTask) return false;\r\n    \r\n    const sourceEndWeek = Math.max(...sourceTask.activities.flatMap(a => a.weeks));\r\n    const targetStartWeek = Math.min(...targetTask.activities.flatMap(a => a.weeks));\r\n    \r\n    return targetStartWeek > sourceEndWeek;\r\n  };\r\n\r\n  const validateTimelineIntegrity = (taskId, activityId = null) => {\r\n    const issues = [];\r\n    \r\n    if (activityId) {\r\n      // Check if removing this activity creates gaps in task timeline\r\n      const task = tasks.find(t => t.id === taskId);\r\n      const remainingActivities = task.activities.filter(a => a.id !== activityId);\r\n      \r\n      if (remainingActivities.length > 0) {\r\n        const weeks = remainingActivities.flatMap(a => a.weeks).sort((a, b) => a - b);\r\n        for (let i = 1; i < weeks.length; i++) {\r\n          if (weeks[i] - weeks[i-1] > 1) {\r\n            issues.push(`Removing this activity may create timeline gaps in ${task.name}`);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // Check if removing this task creates gaps in project timeline\r\n      const remainingTasks = tasks.filter(t => t.id !== taskId);\r\n      const allWeeks = remainingTasks.flatMap(t => t.activities.flatMap(a => a.weeks)).sort((a, b) => a - b);\r\n      \r\n      for (let i = 1; i < allWeeks.length; i++) {\r\n        if (allWeeks[i] - allWeeks[i-1] > 2) { // Allow some gaps between tasks\r\n          issues.push('Removing this task may create significant timeline gaps');\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    \r\n    return issues;\r\n  };\r\n\r\n  // Enhanced delete functions with dependency validation\r\n  const initiateDeleteTask = (taskId) => {\r\n    const task = tasks.find(t => t.id === taskId);\r\n    if (!task) return;\r\n    \r\n    const dependents = findDependentActivities(taskId);\r\n    const timelineIssues = validateTimelineIntegrity(taskId);\r\n    \r\n    setDeleteConfirmationData({\r\n      type: 'task',\r\n      item: task,\r\n      dependents,\r\n      timelineIssues,\r\n      onConfirm: () => executeDeleteTask(taskId)\r\n    });\r\n    setShowDeleteConfirmation(true);\r\n  };\r\n\r\n  const initiateDeleteActivity = (taskId, activityId) => {\r\n    const task = tasks.find(t => t.id === taskId);\r\n    const activity = task?.activities.find(a => a.id === activityId);\r\n    if (!task || !activity) return;\r\n    \r\n    const dependents = findDependentActivities(taskId, activityId);\r\n    const timelineIssues = validateTimelineIntegrity(taskId, activityId);\r\n    \r\n    setDeleteConfirmationData({\r\n      type: 'activity',\r\n      item: activity,\r\n      parentTask: task,\r\n      dependents,\r\n      timelineIssues,\r\n      onConfirm: () => executeDeleteActivity(taskId, activityId)\r\n    });\r\n    setShowDeleteConfirmation(true);\r\n  };\r\n\r\n  const executeDeleteTask = (taskId) => {\r\n    const taskToDelete = tasks.find(t => t.id === taskId);\r\n    if (!taskToDelete) return;\r\n    \r\n    // Store for undo functionality\r\n    const undoData = {\r\n      type: 'task',\r\n      item: taskToDelete,\r\n      timestamp: Date.now(),\r\n      originalTasks: [...tasks]\r\n    };\r\n    \r\n    setTasks(prevTasks => {\r\n      const newTasks = prevTasks.filter(task => task.id !== taskId);\r\n      return newTasks;\r\n    });\r\n    \r\n    // Add to undo history\r\n    setDeletedItemsHistory(prev => [undoData, ...prev.slice(0, 4)]); // Keep last 5 deletions\r\n    \r\n    showEditFeedbackMessage('Task deleted successfully!', 'success');\r\n    showUndoNotificationWithTimeout();\r\n    setShowDeleteConfirmation(false);\r\n  };\r\n\r\n  const executeDeleteActivity = (taskId, activityId) => {\r\n    const task = tasks.find(t => t.id === taskId);\r\n    const activityToDelete = task?.activities.find(a => a.id === activityId);\r\n    if (!task || !activityToDelete) return;\r\n    \r\n    // Store for undo functionality\r\n    const undoData = {\r\n      type: 'activity',\r\n      item: activityToDelete,\r\n      parentTaskId: taskId,\r\n      timestamp: Date.now(),\r\n      originalTasks: [...tasks]\r\n    };\r\n    \r\n    setTasks(prevTasks => {\r\n      const newTasks = prevTasks.map(task => {\r\n        if (task.id === taskId) {\r\n          return {\r\n            ...task,\r\n            activities: task.activities.filter(activity => activity.id !== activityId)\r\n          };\r\n        }\r\n        return task;\r\n      });\r\n      return newTasks;\r\n    });\r\n    \r\n    // Add to undo history\r\n    setDeletedItemsHistory(prev => [undoData, ...prev.slice(0, 4)]); // Keep last 5 deletions\r\n    \r\n    showEditFeedbackMessage('Activity deleted successfully!', 'success');\r\n    showUndoNotificationWithTimeout();\r\n    setShowDeleteConfirmation(false);\r\n  };\r\n\r\n  const undoLastDeletion = () => {\r\n    if (deletedItemsHistory.length === 0) return;\r\n    \r\n    const lastDeletion = deletedItemsHistory[0];\r\n    setTasks(lastDeletion.originalTasks);\r\n    setDeletedItemsHistory(prev => prev.slice(1));\r\n    \r\n    showEditFeedbackMessage(\r\n      `${lastDeletion.type === 'task' ? 'Task' : 'Activity'} \"${lastDeletion.item.name}\" restored successfully!`, \r\n      'success'\r\n    );\r\n    setShowUndoNotification(false);\r\n  };\r\n\r\n  const showUndoNotificationWithTimeout = () => {\r\n    setShowUndoNotification(true);\r\n    setTimeout(() => {\r\n      setShowUndoNotification(false);\r\n    }, 10000); // Show undo option for 10 seconds\r\n  };\r\n  \r\n  // Legacy delete functions - now redirect to enhanced versions\r\n  const deleteTask = (taskId) => {\r\n    initiateDeleteTask(taskId);\r\n  };\r\n  \r\n  const deleteActivity = (taskId, activityId) => {\r\n    initiateDeleteActivity(taskId, activityId);\r\n  };\r\n  \r\n  // Focus input when add row modal opens\r\n  useEffect(() => {\r\n    if (showAddRowModal && addRowInputRef.current) {\r\n      addRowInputRef.current.focus();\r\n    }\r\n  }, [showAddRowModal]);\r\n\r\n  // Enhanced Delete Confirmation Modal Component\r\n  const DeleteConfirmationModal = () => {\r\n    if (!showDeleteConfirmation || !deleteConfirmationData) return null;\r\n    \r\n    const { type, item, parentTask, dependents, timelineIssues, onConfirm } = deleteConfirmationData;\r\n    const hasIssues = dependents.length > 0 || timelineIssues.length > 0;\r\n    \r\n    return (\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n        <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-lg mx-4 max-h-[90vh] overflow-y-auto\">\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <h2 className=\"text-xl font-bold text-red-600\">\r\n              Confirm {type === 'task' ? 'Task' : 'Activity'} Deletion\r\n            </h2>\r\n            <button \r\n              onClick={() => setShowDeleteConfirmation(false)}\r\n              className=\"bg-gray-200 rounded-full p-2 hover:bg-gray-300\"\r\n            >\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded\">\r\n              <p className=\"font-medium text-gray-800\">\r\n                Are you sure you want to delete {type === 'task' ? 'task' : 'activity'}: \r\n                <span className=\"font-bold text-red-700\"> &quot;{item.name}&quot;</span>\r\n                {type === 'task' && ' and all its activities'}?\r\n              </p>\r\n              {parentTask && (\r\n                <p className=\"text-sm text-gray-600 mt-1\">\r\n                  From task: <span className=\"font-medium\">{parentTask.name}</span>\r\n                </p>\r\n              )}\r\n            </div>\r\n            \r\n            {dependents.length > 0 && (\r\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded\">\r\n                <h4 className=\"font-semibold text-red-800 mb-2\">⚠️ Dependency Warning</h4>\r\n                <p className=\"text-sm text-red-700 mb-2\">\r\n                  The following activities may be affected by this deletion:\r\n                </p>\r\n                <ul className=\"list-disc pl-5 space-y-1\">\r\n                  {dependents.map((dep, index) => (\r\n                    <li key={index} className=\"text-sm text-red-600\">\r\n                      <span className=\"font-medium\">{dep.task}</span> → {dep.activity}\r\n                      <span className=\"text-xs ml-1\">({dep.type} dependency)</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n            \r\n            {timelineIssues.length > 0 && (\r\n              <div className=\"p-3 bg-orange-50 border border-orange-200 rounded\">\r\n                <h4 className=\"font-semibold text-orange-800 mb-2\">📅 Timeline Issues</h4>\r\n                <ul className=\"list-disc pl-5 space-y-1\">\r\n                  {timelineIssues.map((issue, index) => (\r\n                    <li key={index} className=\"text-sm text-orange-700\">{issue}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n            \r\n            {!hasIssues && (\r\n              <div className=\"p-3 bg-green-50 border border-green-200 rounded\">\r\n                <p className=\"text-sm text-green-700\">\r\n                  ✅ No dependencies or timeline issues detected. Safe to delete.\r\n                </p>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"p-3 bg-blue-50 border border-blue-200 rounded\">\r\n              <p className=\"text-sm text-blue-700\">\r\n                💡 <strong>Tip:</strong> You can undo this deletion within 10 seconds after confirming.\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end space-x-3 mt-6\">\r\n            <button\r\n              onClick={() => setShowDeleteConfirmation(false)}\r\n              className=\"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={onConfirm}\r\n              className={`px-4 py-2 text-white rounded ${\r\n                hasIssues \r\n                  ? 'bg-red-600 hover:bg-red-700' \r\n                  : 'bg-orange-600 hover:bg-orange-700'\r\n              }`}\r\n            >\r\n              {hasIssues ? 'Delete Anyway' : 'Confirm Delete'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Add Row Modal Component\r\n  const AddRowModal = () => {\r\n    if (!showAddRowModal) return null;\r\n    \r\n    return (\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n        <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-md mx-4\">\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <h2 className=\"text-xl font-bold text-blue-800\">Add New Row</h2>\r\n            <button \r\n              onClick={() => setShowAddRowModal(false)}\r\n              className=\"bg-gray-200 rounded-full p-2 hover:bg-gray-300\"\r\n            >\r\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Type</label>\r\n              <div className=\"flex space-x-4\">\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    value=\"task\"\r\n                    checked={addRowType === 'task'}\r\n                    onChange={(e) => setAddRowType(e.target.value)}\r\n                    className=\"mr-2\"\r\n                  />\r\n                  Task\r\n                </label>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    value=\"activity\"\r\n                    checked={addRowType === 'activity'}\r\n                    onChange={(e) => setAddRowType(e.target.value)}\r\n                    className=\"mr-2\"\r\n                  />\r\n                  Activity\r\n                </label>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Name</label>\r\n              <input\r\n                ref={addRowInputRef}\r\n                type=\"text\"\r\n                value={addRowData.name}\r\n                onChange={(e) => setAddRowData({...addRowData, name: e.target.value})}\r\n                placeholder=\"Enter name for new row\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n            \r\n            {addRowType === 'activity' && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Parent Task</label>\r\n                <select\r\n                  value={addRowData.parentTaskId || ''}\r\n                  onChange={(e) => setAddRowData({...addRowData, parentTaskId: parseInt(e.target.value)})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  <option value=\"\">Select a parent task</option>\r\n                  {tasks.map(task => (\r\n                    <option key={task.id} value={task.id}>{task.name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Owner</label>\r\n              <select\r\n                value={addRowData.owner}\r\n                onChange={(e) => setAddRowData({...addRowData, owner: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"ME\">ME (Daniil Vladimirov)</option>\r\n                <option value=\"SV\">Supervisor</option>\r\n                <option value=\"SME\">Subject Matter Expert</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Color</label>\r\n              <select\r\n                value={addRowData.color}\r\n                onChange={(e) => setAddRowData({...addRowData, color: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"bg-blue-400\">Planning (Blue)</option>\r\n                <option value=\"bg-purple-400\">Development (Purple)</option>\r\n                <option value=\"bg-indigo-400\">Testing (Indigo)</option>\r\n                <option value=\"bg-green-300\">Ongoing Research (Light Green)</option>\r\n                <option value=\"bg-green-400\">Research Activities (Green)</option>\r\n                <option value=\"bg-pink-400\">Writing (Pink)</option>\r\n                <option value=\"bg-red-400\">Review (Red)</option>\r\n                <option value=\"bg-blue-300\">Finalization (Light Blue)</option>\r\n                <option value=\"bg-purple-300\">Other (Light Purple)</option>\r\n              </select>\r\n            </div>\r\n            \r\n            {addRowType === 'activity' && (\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={addRowData.isGateway}\r\n                    onChange={(e) => setAddRowData({...addRowData, isGateway: e.target.checked})}\r\n                    className=\"mr-2\"\r\n                  />\r\n                  Gateway Milestone\r\n                </label>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end space-x-3 mt-6\">\r\n            <button\r\n              onClick={() => setShowAddRowModal(false)}\r\n              className=\"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleAddRow}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n            >\r\n              Add Row\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Instructions Modal Component\r\n  const InstructionsModal = () => {\r\n    return (\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n        <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-2xl mx-4 max-h-[90vh] overflow-y-auto\">\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <h2 className=\"text-2xl font-bold text-blue-800\">Welcome to Thesis GANTT Chart</h2>\r\n            <button \r\n              onClick={() => setShowInstructions(false)}\r\n              className=\"bg-gray-200 rounded-full p-2 hover:bg-gray-300\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"mb-4 border-b pb-3\">\r\n            <p className=\"font-medium\">Created by: <span className=\"text-blue-700\">Daniil Vladimirov</span></p>\r\n            <p className=\"font-medium\">Student Number: <span className=\"text-blue-700\">3154227</span></p>\r\n          </div>\r\n          \r\n          <h3 className=\"text-lg font-semibold mb-2\">How to Use This GANTT Chart:</h3>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">1. Tracking Task Progress</h4>\r\n              <p>Click on any colored cell to mark it as completed. The cell will turn gray with a checkmark. Click again to mark it as incomplete.</p>\r\n              <div className=\"flex mt-1 items-center\">\r\n                <div className=\"w-6 h-6 bg-purple-400 mr-2\"></div>\r\n                <span>→ Click →</span>\r\n                <div className=\"w-6 h-6 bg-gray-400 flex items-center justify-center ml-2\">\r\n                  <svg className=\"w-3 h-3 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\"></path>\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">2. Progress Tracking</h4>\r\n              <p>Each task has a progress bar showing completion percentage. As you mark days complete, the progress bar updates automatically.</p>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">3. Gateway Milestones</h4>\r\n              <p>Amber cells represent gateway milestones. Hover over them to see deliverables and next steps.</p>\r\n              <div className=\"bg-amber-500 w-12 h-6 rounded mt-1\"></div>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">4. Row Editing</h4>\r\n              <p>Edit task and activity names by clicking the &quot;Edit&quot; button that appears on hover, or double-click on activity names. Press Enter to save or Escape to cancel.</p>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">5. Adding New Rows</h4>\r\n              <p>Click the &quot;Add Row&quot; button to add new tasks or activities. You can specify the type, parent task (for activities), owner, color, and whether it&apos;s a gateway milestone.</p>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">6. Drag and Drop</h4>\r\n              <p>Drag task rows to reorder them. This helps organize your timeline and adjust priorities as your project evolves.</p>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">7. Automatic Saving</h4>\r\n              <p>Your progress and edits are automatically saved in your browser&apos;s local storage. It will persist even if you close the browser and return later.</p>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-medium text-blue-600\">8. Thesis Timeline</h4>\r\n              <p>This GANTT chart covers the 3-month thesis timeframe from June 1 to September 1, 2024. All tasks include a 10% buffer time as requested.</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mt-6 bg-blue-50 p-4 rounded\">\r\n            <h4 className=\"font-semibold\">Research Focus</h4>\r\n            <p>This chart is designed for tracking progress on the thesis topic: &quot;Can AI agents facilitate the transition from computer system validation to computer software assurance?&quot; as outlined in the assignment.</p>\r\n          </div>\r\n          \r\n          <button \r\n            onClick={() => setShowInstructions(false)}\r\n            className=\"mt-6 bg-blue-600 text-white py-2 px-6 rounded hover:bg-blue-700 w-full font-medium\"\r\n          >\r\n            Get Started\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // File Management Functions for Task 13 Integration\r\n  const getAllFiles = () => {\r\n    const allFiles = [];\r\n    tasks.forEach(task => {\r\n      task.activities.forEach(activity => {\r\n        if (activity.files && activity.files.length > 0) {\r\n          activity.files.forEach(file => {\r\n            allFiles.push({\r\n              file: file,\r\n              activityId: activity.id,\r\n              activityName: activity.name,\r\n              taskId: task.id,\r\n              taskName: task.name\r\n            });\r\n          });\r\n        }\r\n      });\r\n    });\r\n    return allFiles;\r\n  };\r\n\r\n  const handleFileTooltipShow = (e, activity) => {\r\n    if (activity.files && activity.files.length > 0) {\r\n      const rect = e.currentTarget.getBoundingClientRect();\r\n      const x = window.pageXOffset + rect.left;\r\n      const y = window.pageYOffset + rect.top;\r\n      \r\n      setFileTooltip({\r\n        isVisible: true,\r\n        files: activity.files,\r\n        position: { x, y }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleFileTooltipHide = () => {\r\n    setFileTooltip({\r\n      isVisible: false,\r\n      files: [],\r\n      position: { x: 0, y: 0 }\r\n    });\r\n  };\r\n\r\n  const handleFileClick = (file) => {\r\n    setPreviewFile(file);\r\n    setShowFilePreview(true);\r\n    setFileTooltip({\r\n      isVisible: false,\r\n      files: [],\r\n      position: { x: 0, y: 0 }\r\n    });\r\n  };\r\n\r\n  const handleFilePreviewClose = () => {\r\n    setShowFilePreview(false);\r\n    setPreviewFile(null);\r\n  };\r\n\r\n  const handleFileSearchToggle = () => {\r\n    setShowFileSearch(!showFileSearch);\r\n  };\r\n\r\n  const handleFileSelect = (fileData) => {\r\n    setPreviewFile(fileData.file);\r\n    setShowFilePreview(true);\r\n    setShowFileSearch(false);\r\n  };\r\n\r\n  const addFileToActivity = (activityId, file) => {\r\n    setTasks(prevTasks => {\r\n      const newTasks = prevTasks.map(task => ({\r\n        ...task,\r\n        activities: task.activities.map(activity => {\r\n          if (activity.id === activityId) {\r\n            return {\r\n              ...activity,\r\n              files: [...(activity.files || []), file]\r\n            };\r\n          }\r\n          return activity;\r\n        })\r\n      }));\r\n      \r\n      // Trigger auto-save\r\n      debouncedSave(newTasks);\r\n      return newTasks;\r\n    });\r\n  };\r\n\r\n  const removeFileFromActivity = (activityId, fileIndex) => {\r\n    setTasks(prevTasks => {\r\n      const newTasks = prevTasks.map(task => ({\r\n        ...task,\r\n        activities: task.activities.map(activity => {\r\n          if (activity.id === activityId) {\r\n            const newFiles = [...(activity.files || [])];\r\n            newFiles.splice(fileIndex, 1);\r\n            return {\r\n              ...activity,\r\n              files: newFiles\r\n            };\r\n          }\r\n          return activity;\r\n        })\r\n      }));\r\n      \r\n      // Trigger auto-save\r\n      debouncedSave(newTasks);\r\n      return newTasks;\r\n    });\r\n  };\r\n\r\n  // Enhanced drag and drop handlers for files\r\n  const handleFileDragStart = (e, file, activityId) => {\r\n    setDraggedFile({ file, sourceActivityId: activityId });\r\n    e.dataTransfer.effectAllowed = 'move';\r\n  };\r\n\r\n  const handleFileDragEnter = (e, activityId) => {\r\n    e.preventDefault();\r\n    setDropTargetActivity(activityId);\r\n  };\r\n\r\n  const handleFileDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'move';\r\n  };\r\n\r\n  const handleFileDragLeave = (e) => {\r\n    e.preventDefault();\r\n    setDropTargetActivity(null);\r\n  };\r\n\r\n  const handleFileDrop = (e, targetActivityId) => {\r\n    e.preventDefault();\r\n    setDropTargetActivity(null);\r\n    \r\n    if (draggedFile && draggedFile.sourceActivityId !== targetActivityId) {\r\n      // Remove file from source activity\r\n      removeFileFromActivity(draggedFile.sourceActivityId, \r\n        tasks.find(task => task.activities.find(act => act.id === draggedFile.sourceActivityId))\r\n          ?.activities.find(act => act.id === draggedFile.sourceActivityId)\r\n          ?.files.findIndex(f => f === draggedFile.file) || 0\r\n      );\r\n      \r\n      // Add file to target activity\r\n      addFileToActivity(targetActivityId, draggedFile.file);\r\n    }\r\n    \r\n    setDraggedFile(null);\r\n  };\r\n\r\n  const getFileCount = (activity) => {\r\n    return activity.files ? activity.files.length : 0;\r\n  };\r\n\r\n  const hasFiles = (activity) => {\r\n    return activity.files && activity.files.length > 0;\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-2 sm:p-4 lg:p-6 bg-white rounded-lg shadow-lg overflow-x-auto relative\">\r\n      {showInstructions && <InstructionsModal />}\r\n      <AddRowModal />\r\n      \r\n      {/* Mobile-Optimized Header */}\r\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-4 gap-3 lg:gap-0\">\r\n        <h1 className=\"text-lg sm:text-xl lg:text-2xl font-bold leading-tight\">\r\n          <span className=\"hidden sm:inline\">AI-Enabled CSV to CSA Transition: </span>\r\n          <span className=\"sm:hidden\">CSV to CSA: </span>\r\n          Thesis GANTT Chart\r\n        </h1>\r\n        \r\n        {/* Mobile-First Control Buttons */}\r\n        <div className=\"flex flex-col sm:flex-row w-full lg:w-auto space-y-2 sm:space-y-0 sm:space-x-2 items-stretch sm:items-center text-sm\">\r\n          {/* File Search Button - Mobile Optimized */}\r\n          <button\r\n            onClick={handleFileSearchToggle}\r\n            className=\"bg-purple-100 hover:bg-purple-200 text-purple-800 px-3 py-2 sm:py-1 rounded flex items-center justify-center sm:justify-start touch-manipulation min-h-[44px] sm:min-h-[auto]\"\r\n            title=\"Search all files across activities\"\r\n          >\r\n            <svg className=\"w-4 h-4 mr-1 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"/>\r\n            </svg>\r\n            <span>Files ({getAllFiles().length})</span>\r\n          </button>\r\n          \r\n          {/* Auto-save Status Indicator - Mobile Optimized */}\r\n          <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center space-y-1 sm:space-y-0 sm:space-x-2 text-sm w-full sm:w-auto\">\r\n            <div className={`flex items-center justify-center sm:justify-start px-3 py-2 sm:px-2 sm:py-1 rounded touch-manipulation min-h-[44px] sm:min-h-[auto] ${\r\n              saveStatus === 'saved' ? 'bg-green-100 text-green-800' :\r\n              saveStatus === 'saving' ? 'bg-yellow-100 text-yellow-800' :\r\n              saveStatus === 'error' ? 'bg-red-100 text-red-800' :\r\n              'bg-orange-100 text-orange-800'\r\n            }`}>\r\n              {saveStatus === 'saved' && (\r\n                <>\r\n                  <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n                  </svg>\r\n                  Saved\r\n                </>\r\n              )}\r\n              {saveStatus === 'saving' && (\r\n                <>\r\n                  <svg className=\"w-4 h-4 mr-1 animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\r\n                  </svg>\r\n                  Saving...\r\n                </>\r\n              )}\r\n              {saveStatus === 'error' && (\r\n                <>\r\n                  <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n                  </svg>\r\n                  Error\r\n                </>\r\n              )}\r\n              {saveStatus === 'unsaved' && (\r\n                <>\r\n                  <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n                  </svg>\r\n                  Unsaved\r\n                </>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Manual Save Button - Mobile Optimized */}\r\n            <button\r\n              onClick={manualSave}\r\n              disabled={saveStatus === 'saving'}\r\n              className=\"bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-2 sm:px-2 sm:py-1 rounded text-sm sm:text-xs flex items-center justify-center sm:justify-start disabled:opacity-50 touch-manipulation min-h-[44px] sm:min-h-[auto]\"\r\n              title=\"Save manually\"\r\n            >\r\n              <svg className=\"w-4 h-4 sm:w-3 sm:h-3 mr-1 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12\"></path>\r\n              </svg>\r\n              <span>Save</span>\r\n            </button>\r\n            \r\n            {/* Last Save Time - Hidden on mobile, shown on larger screens */}\r\n            {lastSaveTime && (\r\n              <span className=\"hidden sm:block text-xs text-gray-500 text-center sm:text-left\" title={`Last saved: ${lastSaveTime.toLocaleString()}`}>\r\n                {lastSaveTime.toLocaleTimeString()}\r\n              </span>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Action Buttons - Mobile Grid */}\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 lg:flex gap-2 w-full sm:w-auto\">\r\n            <button \r\n              onClick={() => setShowExportPanel(true)} \r\n              className=\"bg-indigo-100 hover:bg-indigo-200 text-indigo-800 px-3 py-2 sm:py-1 rounded flex items-center justify-center sm:justify-start touch-manipulation min-h-[44px] sm:min-h-[auto]\"\r\n            >\r\n              <svg className=\"w-4 h-4 mr-1 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\r\n              </svg>\r\n              <span>Export</span>\r\n            </button>\r\n            <button \r\n              onClick={() => setShowAddRowModal(true)} \r\n              className=\"bg-green-100 hover:bg-green-200 text-green-800 px-3 py-2 sm:py-1 rounded flex items-center justify-center sm:justify-start touch-manipulation min-h-[44px] sm:min-h-[auto]\"\r\n            >\r\n              <svg className=\"w-4 h-4 mr-1 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\"></path>\r\n              </svg>\r\n              <span>Add Row</span>\r\n            </button>\r\n            <button \r\n              onClick={() => setShowInstructions(true)} \r\n              className=\"bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 sm:py-1 rounded flex items-center justify-center sm:justify-start touch-manipulation min-h-[44px] sm:min-h-[auto]\"\r\n            >\r\n              <svg className=\"w-4 h-4 mr-1 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n              </svg>\r\n              <span>Help</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Project Info - Mobile Optimized */}\r\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-4 gap-2 lg:gap-0\">\r\n        <h2 className=\"text-base sm:text-lg font-semibold\">\r\n          <span className=\"hidden sm:inline\">Project Timeline: June 1 - September 1, 2024</span>\r\n          <span className=\"sm:hidden\">Timeline: Jun-Sep 2024</span>\r\n        </h2>\r\n        <div className=\"text-sm text-gray-600\">\r\n          <span className=\"font-medium\">Daniil Vladimirov</span>\r\n          <span className=\"hidden sm:inline\"> | Student #3154227</span>\r\n          <div className=\"sm:hidden text-xs text-gray-500\">#3154227</div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Research Objectives - Mobile First Grid */}\r\n      <div className=\"mb-6\">\r\n        <h3 className=\"text-base sm:text-md font-semibold mb-3\">Research Objectives:</h3>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm\">\r\n          <div className=\"bg-gray-100 p-3 rounded touch-manipulation\">1. Analyze existing CSV practices</div>\r\n          <div className=\"bg-gray-100 p-3 rounded touch-manipulation\">2. Investigate CSA's risk-based approach</div>\r\n          <div className=\"bg-gray-100 p-3 rounded touch-manipulation\">3. Conduct gap analysis for CSV to CSA transition</div>\r\n          <div className=\"bg-gray-100 p-3 rounded touch-manipulation\">4. Examine AI agent capabilities and limitations</div>\r\n          <div className=\"bg-gray-100 p-3 rounded touch-manipulation\">5. Suggest AI applications to bridge CSV-CSA gap</div>\r\n          <div className=\"bg-gray-100 p-3 rounded touch-manipulation\">6. Develop and test AI prototype for validation</div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Legend - Mobile Optimized Grid */}\r\n      <div className=\"mb-4\">\r\n        <h3 className=\"text-base sm:text-md font-semibold mb-3\">Legend:</h3>\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-3 text-xs sm:text-sm\">\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-blue-400 flex-shrink-0\"></div>\r\n            <span>Planning</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-purple-400 flex-shrink-0\"></div>\r\n            <span>Development</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-indigo-400 flex-shrink-0\"></div>\r\n            <span>Testing</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-green-300 flex-shrink-0\"></div>\r\n            <span className=\"hidden sm:inline\">Ongoing Research</span>\r\n            <span className=\"sm:hidden\">Ongoing</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-green-400 flex-shrink-0\"></div>\r\n            <span className=\"hidden sm:inline\">Research Activities</span>\r\n            <span className=\"sm:hidden\">Research</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-pink-400 flex-shrink-0\"></div>\r\n            <span>Writing</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-red-400 flex-shrink-0\"></div>\r\n            <span>Review</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-blue-300 flex-shrink-0\"></div>\r\n            <span>Finalization</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-amber-500 flex-shrink-0\"></div>\r\n            <span>Gateway</span>\r\n          </div>\r\n          <div className=\"flex items-center p-2 sm:p-0 bg-gray-50 sm:bg-transparent rounded sm:rounded-none\">\r\n            <div className=\"w-4 h-4 mr-2 bg-gray-400 flex-shrink-0\"></div>\r\n            <span>Completed</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Resources Section - Mobile Optimized */}\r\n      <div className=\"mb-4\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 gap-2 sm:gap-0\">\r\n          <h3 className=\"text-base sm:text-md font-semibold\">Resources:</h3>\r\n          <button\r\n            onClick={() => {\r\n              if (window.confirm(\"Are you sure you want to reset all progress? This cannot be undone.\")) {\r\n                localStorage.removeItem('thesisGanttCompletedDays');\r\n                localStorage.removeItem('thesisGanttVisited');\r\n                alert(\"Progress has been reset. The page will now reload.\");\r\n                window.location.reload();\r\n              }\r\n            }}\r\n            className=\"text-xs sm:text-xs text-red-600 hover:text-red-800 border border-red-300 rounded px-3 py-2 sm:px-2 sm:py-1 hover:bg-red-50 touch-manipulation min-h-[44px] sm:min-h-[auto] w-full sm:w-auto flex items-center justify-center\"\r\n          >\r\n            Reset Progress\r\n          </button>\r\n        </div>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:flex lg:flex-wrap gap-2 sm:gap-3 text-sm\">\r\n          {Object.entries(owners).map(([key, value]) => (\r\n            <div key={key} className=\"flex items-center\">\r\n              <div className=\"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-1\">\r\n                {key}\r\n              </div>\r\n              <span>{value}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded flex items-center justify-between\">\r\n        <p className=\"text-sm font-medium\">Click on colored cells to mark progress. Hover over task/activity names to edit them. Use &quot;Add Row&quot; to create new tasks/activities. Drag tasks to reorder them. Your changes are automatically saved.</p>\r\n        <button \r\n          onClick={() => setShowInstructions(true)}\r\n          className=\"text-blue-700 hover:text-blue-900 text-sm font-medium\"\r\n        >\r\n          View full instructions\r\n        </button>\r\n      </div>\r\n      \r\n      {/* Gateway Hover Tooltip */}\r\n      {hoveredGateway && (\r\n        <div \r\n          className=\"absolute bg-white border border-gray-300 shadow-lg rounded-md p-3 z-50 max-w-sm\"\r\n          style={{\r\n            left: `${tooltipPosition.x}px`, \r\n            top: `${tooltipPosition.y}px`,\r\n            transform: 'translate(-50%, 10px)',\r\n            pointerEvents: 'none'\r\n          }}\r\n        >\r\n          <h4 className=\"font-bold text-lg text-amber-600\">{hoveredGateway.name}</h4>\r\n          <h5 className=\"font-semibold mt-2\">Deliverables:</h5>\r\n          <ul className=\"list-disc pl-5 mt-1\">\r\n            {hoveredGateway.deliverables.map((item, index) => (\r\n              <li key={index}>{item}</li>\r\n            ))}\r\n          </ul>\r\n          <h5 className=\"font-semibold mt-2\">Next Steps:</h5>\r\n          <p>{hoveredGateway.nextSteps}</p>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Auto-save Error Notification */}\r\n      {saveError && (\r\n        <div className=\"fixed top-16 right-4 p-3 bg-red-100 border border-red-300 text-red-800 rounded-md shadow-lg z-50 max-w-sm\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center\">\r\n              <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n              </svg>\r\n              <div>\r\n                <span className=\"font-medium\">Auto-save Error</span>\r\n                <p className=\"text-sm mt-1\">{saveError}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 ml-4\">\r\n              <button\r\n                onClick={manualSave}\r\n                className=\"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs\"\r\n              >\r\n                Retry\r\n              </button>\r\n              <button\r\n                onClick={recoverUnsavedChanges}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs\"\r\n              >\r\n                Recover\r\n              </button>\r\n              <button\r\n                onClick={() => setSaveError(null)}\r\n                className=\"bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 rounded text-xs\"\r\n              >\r\n                Dismiss\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Edit Feedback Notification */}\r\n      {showEditFeedback.show && (\r\n        <div \r\n          className={`fixed top-4 right-4 p-3 rounded-md shadow-lg z-50 max-w-sm ${\r\n            showEditFeedback.type === 'success' \r\n              ? 'bg-green-100 border border-green-300 text-green-800' \r\n              : 'bg-red-100 border border-red-300 text-red-800'\r\n          }`}\r\n        >\r\n          <div className=\"flex items-center\">\r\n            {showEditFeedback.type === 'success' ? (\r\n              <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n              </svg>\r\n            ) : (\r\n              <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n              </svg>\r\n            )}\r\n            <span className=\"font-medium\">{showEditFeedback.message}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Undo Deletion Notification */}\r\n      {showUndoNotification && deletedItemsHistory.length > 0 && (\r\n        <div className=\"fixed top-4 left-4 p-4 bg-blue-100 border border-blue-300 text-blue-800 rounded-md shadow-lg z-50 max-w-sm\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"flex items-center\">\r\n                <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z\"></path>\r\n                </svg>\r\n                <span className=\"font-medium\">Item Deleted</span>\r\n              </div>\r\n              <p className=\"text-sm mt-1\">\r\n                &quot;{deletedItemsHistory[0]?.item.name}&quot; was deleted\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 ml-4\">\r\n              <button\r\n                onClick={undoLastDeletion}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm font-medium\"\r\n              >\r\n                Undo\r\n              </button>\r\n              <button\r\n                onClick={() => setShowUndoNotification(false)}\r\n                className=\"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs\"\r\n              >\r\n                Dismiss\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Mobile-Optimized GANTT Table Container */}\r\n      <div className=\"overflow-x-auto touch-manipulation\" style={{ WebkitOverflowScrolling: 'touch' }}>\r\n        <table className=\"border-collapse w-full min-w-max\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"border border-gray-300 bg-gray-100 p-2 sm:p-2 w-48 sm:w-48 text-left text-xs sm:text-sm\">\r\n                <span className=\"hidden sm:inline\">Tasks & Activities</span>\r\n                <span className=\"sm:hidden\">Tasks</span>\r\n              </th>\r\n              {weeks.map((week) => (\r\n                <th key={week.name} colSpan={7} className=\"border border-gray-300 bg-gray-800 text-white p-1 sm:p-1 text-center text-xs\">\r\n                  <span className=\"hidden sm:inline\">{week.name}</span>\r\n                  <span className=\"sm:hidden\">{week.name.split(' ')[0]}</span>\r\n                </th>\r\n              ))}\r\n              <th className=\"border border-gray-300 bg-gray-100 p-1 sm:p-2 w-12 sm:w-16 text-center text-xs sm:text-sm\">\r\n                <span className=\"hidden sm:inline\">Owner</span>\r\n                <span className=\"sm:hidden\">Own</span>\r\n              </th>\r\n              <th className=\"border border-gray-300 bg-gray-100 p-1 sm:p-2 w-16 sm:w-24 text-center text-xs sm:text-sm\">\r\n                <span className=\"hidden sm:inline\">Progress</span>\r\n                <span className=\"sm:hidden\">%</span>\r\n              </th>\r\n            </tr>\r\n            <tr>\r\n              <th className=\"border border-gray-300 bg-gray-100\"></th>\r\n              {weeks.map((week, weekIndex) => (\r\n                week.days.map((day) => (\r\n                  <th key={`${weekIndex}-${day}`} className=\"border border-gray-300 bg-gray-200 w-6 sm:w-6 p-1 text-center text-xs min-h-[28px] sm:min-h-[auto]\">\r\n                    <span className=\"hidden sm:inline\">{day}</span>\r\n                    <span className=\"sm:hidden\">{day.charAt(0)}</span>\r\n                  </th>\r\n                ))\r\n              ))}\r\n              <th className=\"border border-gray-300 bg-gray-100\"></th>\r\n              <th className=\"border border-gray-300 bg-gray-100\"></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {tasks.map((task) => (\r\n              <React.Fragment key={task.id}>\r\n                <tr\r\n                  draggable\r\n                  onDragStart={(e) => handleDragStart(e, task, 'task')}\r\n                  onDragOver={(e) => handleDragOver(e, task, 'task')}\r\n                  onDrop={(e) => handleDrop(e, task, 'task')}\r\n                  className={`transition-all duration-300 ${\r\n                    dragOverItem?.type === 'task' && dragOverItem.id === task.id \r\n                      ? 'border-blue-500 border-2 transform scale-105' \r\n                      : ''\r\n                  } ${\r\n                    draggedItem?.type === 'task' && draggedItem.id === task.id \r\n                      ? 'opacity-50' \r\n                      : ''\r\n                  }`}\r\n                >\r\n                  <td className=\"border border-gray-300 bg-gray-800 text-white p-1 sm:p-2 font-bold relative cursor-move touch-manipulation\">\r\n                    <div className=\"flex items-center justify-between group min-h-[36px] sm:min-h-[auto]\">\r\n                      {editingRow?.type === 'task' && editingRow?.id === task.id ? (\r\n                        <div className=\"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-1 sm:gap-2\">\r\n                          <input\r\n                            ref={editInputRef}\r\n                            type=\"text\"\r\n                            value={editValue}\r\n                            onChange={(e) => setEditValue(e.target.value)}\r\n                            onKeyDown={handleEditKeyPress}\r\n                            className=\"flex-1 bg-white text-gray-900 px-2 py-2 sm:py-1 rounded text-sm font-bold touch-manipulation\"\r\n                            maxLength={100}\r\n                          />\r\n                          <div className=\"flex gap-1\">\r\n                            <button\r\n                              onClick={saveEdit}\r\n                              className=\"bg-green-600 hover:bg-green-700 text-white px-3 py-2 sm:px-2 sm:py-1 rounded text-xs touch-manipulation min-h-[36px] sm:min-h-[auto] flex items-center justify-center\"\r\n                              title=\"Save (Enter)\"\r\n                            >\r\n                              ✓\r\n                            </button>\r\n                            <button\r\n                              onClick={cancelEditing}\r\n                              className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-2 sm:px-2 sm:py-1 rounded text-xs touch-manipulation min-h-[36px] sm:min-h-[auto] flex items-center justify-center\"\r\n                              title=\"Cancel (Escape)\"\r\n                            >\r\n                              ✕\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <>\r\n                          <span className=\"flex-1 text-xs sm:text-sm leading-tight\">{task.name}</span>\r\n                          <div className=\"flex flex-col sm:flex-row gap-1 ml-2\">\r\n                            <button\r\n                              onClick={() => startEditing('task', task.id, task.name)}\r\n                              className=\"opacity-100 sm:opacity-0 group-hover:opacity-100 bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-opacity touch-manipulation min-h-[32px] sm:min-h-[auto] flex items-center justify-center\"\r\n                              title=\"Edit task name\"\r\n                            >\r\n                              <span className=\"hidden sm:inline\">Edit</span>\r\n                              <span className=\"sm:hidden\">✏️</span>\r\n                            </button>\r\n                            <button\r\n                              onClick={() => deleteTask(task.id)}\r\n                              className=\"opacity-100 sm:opacity-0 group-hover:opacity-100 bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-opacity touch-manipulation min-h-[32px] sm:min-h-[auto] flex items-center justify-center\"\r\n                              title=\"Delete task\"\r\n                            >\r\n                              <span className=\"hidden sm:inline\">Delete</span>\r\n                              <span className=\"sm:hidden\">🗑️</span>\r\n                            </button>\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                  {weeks.map((week, weekIndex) => (\r\n                    week.days.map((day, dayIndex) => (\r\n                      <td key={`${weekIndex}-${dayIndex}`} className=\"border border-gray-300 bg-gray-700\"></td>\r\n                    ))\r\n                  ))}\r\n                  <td className=\"border border-gray-300 bg-gray-800 text-white\"></td>\r\n                  <td className=\"border border-gray-300 bg-gray-800 text-white\"></td>\r\n                </tr>\r\n                {task.activities.map((activity) => {\r\n                  const progress = calculateActivityProgress(activity);\r\n                  \r\n                  return (\r\n                    <tr key={activity.id} className=\"transition-all duration-300 hover:bg-gray-50\">\r\n                      <td className=\"border border-gray-300 p-1 sm:p-2 text-xs sm:text-sm relative touch-manipulation\">\r\n                        <div className=\"flex items-center justify-between group min-h-[36px] sm:min-h-[auto]\">\r\n                          {editingRow?.type === 'activity' && editingRow?.id === activity.id ? (\r\n                            <div className=\"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-1 sm:gap-2\">\r\n                              <input\r\n                                ref={editInputRef}\r\n                                type=\"text\"\r\n                                value={editValue}\r\n                                onChange={(e) => setEditValue(e.target.value)}\r\n                                onKeyDown={handleEditKeyPress}\r\n                                className=\"flex-1 bg-white text-gray-900 px-2 py-2 sm:py-1 rounded text-sm border touch-manipulation\"\r\n                                maxLength={100}\r\n                              />\r\n                              <div className=\"flex gap-1\">\r\n                                <button\r\n                                  onClick={saveEdit}\r\n                                  className=\"bg-green-600 hover:bg-green-700 text-white px-3 py-2 sm:px-2 sm:py-1 rounded text-xs touch-manipulation min-h-[36px] sm:min-h-[auto] flex items-center justify-center\"\r\n                                  title=\"Save (Enter)\"\r\n                                >\r\n                                  ✓\r\n                                </button>\r\n                                <button\r\n                                  onClick={cancelEditing}\r\n                                  className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-2 sm:px-2 sm:py-1 rounded text-xs touch-manipulation min-h-[36px] sm:min-h-[auto] flex items-center justify-center\"\r\n                                  title=\"Cancel (Escape)\"\r\n                                >\r\n                                  ✕\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            <>\r\n                              <span \r\n                                className=\"flex-1 cursor-pointer leading-tight\" \r\n                                onDoubleClick={() => startEditing('activity', activity.id, activity.name)}\r\n                                title=\"Double-click to edit\"\r\n                              >\r\n                                {activity.name}\r\n                              </span>\r\n                              <div className=\"flex flex-col sm:flex-row gap-1 ml-2\">\r\n                                <button\r\n                                  onClick={() => startEditing('activity', activity.id, activity.name)}\r\n                                  className=\"opacity-100 sm:opacity-0 group-hover:opacity-100 bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs transition-opacity touch-manipulation min-h-[32px] sm:min-h-[auto] flex items-center justify-center\"\r\n                                  title=\"Edit activity name\"\r\n                                >\r\n                                  <span className=\"hidden sm:inline\">Edit</span>\r\n                                  <span className=\"sm:hidden\">✏️</span>\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => deleteActivity(task.id, activity.id)}\r\n                                  className=\"opacity-100 sm:opacity-0 group-hover:opacity-100 bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs transition-opacity touch-manipulation min-h-[32px] sm:min-h-[auto] flex items-center justify-center\"\r\n                                  title=\"Delete activity\"\r\n                                >\r\n                                  <span className=\"hidden sm:inline\">Delete</span>\r\n                                  <span className=\"sm:hidden\">🗑️</span>\r\n                                </button>\r\n                              </div>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      {weeks.map((week, weekIndex) => (\r\n                        week.days.map((day, dayIndex) => (\r\n                          renderCell(weekIndex, dayIndex, activity)\r\n                        ))\r\n                      ))}\r\n                      <td className=\"border border-gray-300 p-1 text-center\">\r\n                        <div className=\"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-red-100 mx-auto flex items-center justify-center text-xs sm:text-sm touch-manipulation\">\r\n                          {activity.owner}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"border border-gray-300 p-1 sm:p-2\">\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-3 sm:h-4 touch-manipulation\">\r\n                          <div \r\n                            className={`h-3 sm:h-4 rounded-full ${progress > 0 ? 'bg-blue-600' : 'bg-gray-300'}`}\r\n                            style={{ width: `${progress > 0 ? progress : 0}%` }}\r\n                          ></div>\r\n                        </div>\r\n                        <div className=\"text-center text-xs mt-1 font-semibold\">{Math.round(progress)}%</div>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </React.Fragment>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      \r\n      <div className=\"mt-6 p-3 bg-blue-50 rounded border border-blue-200 text-sm\">\r\n        <div className=\"flex justify-between items-center mb-2\">\r\n          <h3 className=\"font-semibold\">Key Notes:</h3>\r\n          <div className=\"text-xs text-gray-500\">\r\n            Created by Daniil Vladimirov (3154227) for AI-Enabled CSV to CSA Transition Thesis\r\n          </div>\r\n        </div>\r\n        <ul className=\"list-disc pl-5 space-y-1\">\r\n          <li>Each task includes a 10% time buffer as requested</li>\r\n          <li>Amber colored cells indicate gateways at the end of key tasks (hover to see details)</li>\r\n          <li>Background literature review runs throughout the project</li>\r\n          <li>The prototype development follows Agile/DevOps methodology with TDD</li>\r\n          <li>Mid-project supervisor review scheduled mid-July</li>\r\n          <li>SME evaluation of generated reports scheduled in August</li>\r\n          <li>Sequential dependencies are maintained in the task flow</li>\r\n          <li>The chart visualizes which tasks can be done in parallel</li>\r\n          <li>Click any colored cell to mark it as completed (gray with checkmark)</li>\r\n          <li>Use &quot;Add Row&quot; button to create new tasks or activities with custom properties</li>\r\n          <li>Drag task rows to reorder them within the project timeline</li>\r\n          <li>Edit or delete tasks and activities using the buttons that appear on hover</li>\r\n          <li>Progress and structure changes are automatically saved in your browser</li>\r\n        </ul>\r\n      </div>\r\n      \r\n      {/* Instructions Modal */}\r\n      {showInstructions && <InstructionsModal />}\r\n      \r\n      {/* Add Row Modal */}\r\n      {showAddRowModal && <AddRowModal />}\r\n      \r\n      {/* Delete Confirmation Modal */}\r\n      <DeleteConfirmationModal />\r\n      \r\n      {/* File Management Components - Task 13 Integration */}\r\n      <FileTooltip\r\n        files={fileTooltip.files}\r\n        position={fileTooltip.position}\r\n        isVisible={fileTooltip.isVisible}\r\n        onFileClick={handleFileClick}\r\n        onClose={handleFileTooltipHide}\r\n      />\r\n      \r\n      <FilePreviewModal\r\n        file={previewFile}\r\n        isOpen={showFilePreview}\r\n        onClose={handleFilePreviewClose}\r\n      />\r\n      \r\n      <FileSearch\r\n        allFiles={getAllFiles()}\r\n        onFileSelect={handleFileSelect}\r\n        onClose={() => setShowFileSearch(false)}\r\n        isOpen={showFileSearch}\r\n      />\r\n      \r\n      {/* Export Panel - Task 16 Integration */}\r\n      <ExportPanel\r\n        isOpen={showExportPanel}\r\n        onClose={() => setShowExportPanel(false)}\r\n        ganttData={tasks}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThesisGanttChart;"],"names":["b","a","autoBom","console","warn","test","type","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","_ref","files","position","isVisible","onFileClick","onClose","length","getFileIcon","fileType","toLowerCase","_jsx","className","fill","viewBox","children","formatFileSize","bytes","Math","floor","log","parseFloat","pow","toFixed","truncateFileName","maxLength","arguments","undefined","extension","split","pop","substring","lastIndexOf","_jsxs","style","left","x","top","y","transform","innerWidth","onClick","fillRule","clipRule","map","file","index","size","uploadDate","Date","toLocaleDateString","isOpen","isLoading","setIsLoading","useState","setError","useEffect","timer","clearTimeout","renderPreview","includes","canPreview","src","url","path","alt","onError","controls","description","tags","join","allFiles","onFileSelect","searchTerm","setSearchTerm","selectedFileType","setSelectedFileType","sortBy","setSortBy","sortOrder","setSortOrder","filteredAndSortedFiles","useMemo","filtered","filter","fileData","matchesSearch","some","tag","sort","fileA","fileB","comparison","localeCompare","typeA","typeB","toggleSort","newSortBy","getSortIcon","column","placeholder","value","onChange","getUniqueFileTypes","types","Set","forEach","add","Array","from","toUpperCase","activityName","constructor","this","progressCallbacks","Map","templates","pdf","author","colors","primary","secondary","accent","completed","inProgress","pending","excel","sheetName","headerStyle","font","bold","sz","fgColor","rgb","alignment","horizontal","powerpoint","subtitle","layout","exportOptions","includeCompleted","includePending","includeInProgress","dateRange","specificTasks","includeFiles","includeNotes","watermark","customTitle","registerProgressCallback","exportId","callback","set","updateProgress","progress","message","get","getGanttData","stored","localStorage","getItem","data","JSON","parse","v","t","task","id","n","activities","activity","weeks","w","days","owner","o","color","isGateway","gatewayInfo","gi","getCompletedDays","filterDataByOptions","options","mergedOptions","filteredData","calculateActivityProgress","completedDays","totalDays","completedCount","weekIndex","dayIndex","dayKey","round","exportToPDF","Error","exportToExcel","exportToPowerPoint","exportToZIP","exportToJSON","now","exportData","meta","exportedAt","toISOString","version","totalTasks","totalActivities","reduce","sum","tasks","jsonString","stringify","blob","filename","success","generateCSV","csv","startWeek","min","duration","generateTextSummary","summary","toLocaleString","repeat","getWeekHeaders","_","updateTemplate","updates","getTemplate","setDefaultExportOptions","getDefaultExportOptions","cleanup","clear","ganttData","activeTab","setActiveTab","setExportOptions","enabled","text","opacity","exportProgress","setExportProgress","isExporting","setIsExporting","exportResults","setExportResults","showAdvanced","setShowAdvanced","availableTasks","setAvailableTasks","exportService","handleExportOptionChange","key","prev","handleWatermarkChange","performExport","async","exportType","getExportOptionsForService","trim","timestamp","updated","disabled","stroke","strokeLinecap","strokeLinejoin","strokeWidth","icon","format","width","checked","handleTaskSelection","taskId","selected","max","step","ThesisGanttChart","_deletedItemsHistory$","hoveredGateway","setHoveredGateway","tooltipPosition","setTooltipPosition","setCompletedDays","fileTooltip","setFileTooltip","previewFile","setPreviewFile","showFilePreview","setShowFilePreview","showFileSearch","setShowFileSearch","draggedFile","setDraggedFile","dropTargetActivity","setDropTargetActivity","saveStatus","setSaveStatus","lastSaveTime","setLastSaveTime","saveError","setSaveError","autoSaveEnabled","saveTimeoutRef","useRef","compressData","useCallback","compressed","decompressData","compressedString","saveState","taskData","storageKey","backupKey","testKey","setItem","removeItem","storageError","currentData","toString","backup","debouncedSave","current","showInstructions","setShowInstructions","showExportPanel","setShowExportPanel","editingRow","setEditingRow","editValue","setEditValue","showEditFeedback","setShowEditFeedback","show","showAddRowModal","setShowAddRowModal","addRowType","setAddRowType","addRowData","setAddRowData","parentTaskId","draggedItem","setDraggedItem","dragOverItem","setDragOverItem","showDeleteConfirmation","setShowDeleteConfirmation","deleteConfirmationData","setDeleteConfirmationData","deletedItemsHistory","setDeletedItemsHistory","showUndoNotification","setShowUndoNotification","editInputRef","addRowInputRef","setTasks","deliverables","nextSteps","manualSave","recoverUnsavedChanges","recoveredTasks","alert","savedTasks","decompressed","saveTimestamp","parseInt","confirm","savedCompletedDays","renderCell","isActiveDay","isDayInActivity","isFirstDay","isLastDay","isGatewayCell","isCompleted","activityHasFiles","hasFiles","fileCount","getFileCount","isDropTarget","cellColor","onMouseEnter","rect","currentTarget","getBoundingClientRect","centerX","pageXOffset","bottomY","pageYOffset","bottom","handleFileTooltipShow","onMouseLeave","handleMouseLeave","handleFileTooltipHide","handleClick","toggleDayCompletion","activityId","prevState","newState","onDragEnter","handleFileDragEnter","onDragOver","handleFileDragOver","onDragLeave","handleFileDragLeave","onDrop","handleFileDrop","xmlns","startEditing","currentName","originalName","cancelEditing","saveEdit","validation","trimmedValue","isValid","validateEditValue","prevTasks","handleEditKeyPress","preventDefault","focus","select","addNewTask","newId","generateUniqueTaskId","existingIds","newTask","newTasks","showEditFeedbackMessage","addNewActivity","activityData","newActivityId","find","existingActivityIds","nextActivityId","generateUniqueActivityId","newActivity","handleAddRow","findDependentActivities","dependents","_tasks$find","deletingActivity","hasTimeDependency","push","hasTaskDependency","sourceActivity","targetActivity","sourceEndWeek","sourceTaskId","targetTask","sourceTask","flatMap","validateTimelineIntegrity","issues","remainingActivities","allWeeks","executeDeleteTask","taskToDelete","undoData","item","originalTasks","slice","showUndoNotificationWithTimeout","executeDeleteActivity","activityToDelete","deleteTask","timelineIssues","onConfirm","initiateDeleteTask","deleteActivity","initiateDeleteActivity","parentTask","DeleteConfirmationModal","hasIssues","dep","issue","AddRowModal","ref","InstructionsModal","getAllFiles","taskName","dataTransfer","dropEffect","targetActivityId","_tasks$find2","_tasks$find2$activiti","fileIndex","sourceActivityId","act","findIndex","newFiles","splice","addFileToActivity","handleFileSearchToggle","_Fragment","toLocaleTimeString","reload","Object","entries","_ref2","pointerEvents","undoLastDeletion","lastDeletion","WebkitOverflowScrolling","week","colSpan","day","charAt","React","draggable","onDragStart","handleDragStart","effectAllowed","handleDragOver","handleDrop","targetItem","targetType","draggedIndex","targetIndex","removed","onKeyDown","completedDaysCount","activityDays","startDay","endDay","onDoubleClick","FileTooltip","FilePreviewModal","handleFilePreviewClose","FileSearch","ExportPanel"],"sourceRoot":""}