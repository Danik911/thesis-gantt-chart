{"version":3,"file":"static/js/918.5889dc85.chunk.js","mappings":"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","sources":["components/AuditLog.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useRole } from '../contexts/RoleContext';\r\nimport { useAdminPermissions } from '../hooks/usePermissions';\r\nimport LoadingSpinner from './LoadingSpinner';\r\n\r\nconst AuditLog = () => {\r\n  const { auditLog, loadAuditLog, isLoading, error, clearError } = useRole();\r\n  const { canViewAuditLog } = useAdminPermissions();\r\n  \r\n  const [filteredLogs, setFilteredLogs] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [actionFilter, setActionFilter] = useState('all');\r\n  const [dateFilter, setDateFilter] = useState('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const logsPerPage = 50;\r\n\r\n  useEffect(() => {\r\n    if (canViewAuditLog) {\r\n      loadAuditLog();\r\n    }\r\n  }, [canViewAuditLog, loadAuditLog]);\r\n\r\n  useEffect(() => {\r\n    filterLogs();\r\n  }, [auditLog, searchTerm, actionFilter, dateFilter]);\r\n\r\n  const filterLogs = () => {\r\n    let filtered = [...auditLog];\r\n\r\n    // Filter by search term\r\n    if (searchTerm) {\r\n      filtered = filtered.filter(log => \r\n        log.action.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        log.details.userId?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        log.details.assignedBy?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filter by action type\r\n    if (actionFilter !== 'all') {\r\n      filtered = filtered.filter(log => log.action === actionFilter);\r\n    }\r\n\r\n    // Filter by date\r\n    if (dateFilter !== 'all') {\r\n      const now = new Date();\r\n      let filterDate = new Date();\r\n      \r\n      switch (dateFilter) {\r\n        case 'today':\r\n          filterDate.setHours(0, 0, 0, 0);\r\n          break;\r\n        case 'week':\r\n          filterDate.setDate(now.getDate() - 7);\r\n          break;\r\n        case 'month':\r\n          filterDate.setMonth(now.getMonth() - 1);\r\n          break;\r\n        default:\r\n          filterDate = null;\r\n      }\r\n\r\n      if (filterDate) {\r\n        filtered = filtered.filter(log => new Date(log.timestamp) >= filterDate);\r\n      }\r\n    }\r\n\r\n    // Sort by timestamp (newest first)\r\n    filtered.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\r\n    \r\n    setFilteredLogs(filtered);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const getActionIcon = (action) => {\r\n    switch (action) {\r\n      case 'ROLE_ASSIGNED':\r\n        return '👤';\r\n      case 'ROLE_REMOVED':\r\n        return '❌';\r\n      case 'LOGIN':\r\n        return '🔓';\r\n      case 'LOGOUT':\r\n        return '🔒';\r\n      case 'FILE_UPLOAD':\r\n        return '📁';\r\n      case 'FILE_DELETE':\r\n        return '🗑️';\r\n      case 'GANTT_EDIT':\r\n        return '📊';\r\n      case 'AUDIT_LOG_CLEARED':\r\n        return '🧹';\r\n      default:\r\n        return '📝';\r\n    }\r\n  };\r\n\r\n  const getActionColor = (action) => {\r\n    switch (action) {\r\n      case 'ROLE_ASSIGNED':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'ROLE_REMOVED':\r\n        return 'bg-red-100 text-red-800';\r\n      case 'LOGIN':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'LOGOUT':\r\n        return 'bg-gray-100 text-gray-800';\r\n      case 'FILE_UPLOAD':\r\n        return 'bg-purple-100 text-purple-800';\r\n      case 'FILE_DELETE':\r\n        return 'bg-orange-100 text-orange-800';\r\n      case 'GANTT_EDIT':\r\n        return 'bg-indigo-100 text-indigo-800';\r\n      case 'AUDIT_LOG_CLEARED':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    });\r\n  };\r\n\r\n  const formatDetails = (details) => {\r\n    if (!details || Object.keys(details).length === 0) return 'No additional details';\r\n    \r\n    return Object.entries(details)\r\n      .map(([key, value]) => `${key}: ${value}`)\r\n      .join(', ');\r\n  };\r\n\r\n  const getUniqueActions = () => {\r\n    const actions = [...new Set(auditLog.map(log => log.action))];\r\n    return actions.sort();\r\n  };\r\n\r\n  // Pagination\r\n  const indexOfLastLog = currentPage * logsPerPage;\r\n  const indexOfFirstLog = indexOfLastLog - logsPerPage;\r\n  const currentLogs = filteredLogs.slice(indexOfFirstLog, indexOfLastLog);\r\n  const totalPages = Math.ceil(filteredLogs.length / logsPerPage);\r\n\r\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\r\n\r\n  if (!canViewAuditLog) {\r\n    return (\r\n      <div className=\"p-6 text-center\">\r\n        <h3 className=\"text-lg font-semibold text-red-600\">Access Denied</h3>\r\n        <p className=\"text-gray-600\">You don&rsquo;t have permission to view the audit log.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <LoadingSpinner />\r\n        <p className=\"text-center mt-4\">Loading audit log...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-7xl mx-auto\">\r\n      <div className=\"mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Audit Log</h2>\r\n        <p className=\"text-gray-600\">View system activities and user actions</p>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <p className=\"text-red-800\">{error}</p>\r\n            <button\r\n              onClick={clearError}\r\n              className=\"text-red-600 hover:text-red-800\"\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Summary Stats */}\r\n      <div className=\"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div className=\"bg-white p-4 border border-gray-200 rounded-lg shadow-sm\">\r\n          <div className=\"text-2xl font-bold text-blue-600\">{auditLog.length}</div>\r\n          <div className=\"text-sm text-gray-600\">Total Events</div>\r\n        </div>\r\n        <div className=\"bg-white p-4 border border-gray-200 rounded-lg shadow-sm\">\r\n          <div className=\"text-2xl font-bold text-green-600\">{filteredLogs.length}</div>\r\n          <div className=\"text-sm text-gray-600\">Filtered Events</div>\r\n        </div>\r\n        <div className=\"bg-white p-4 border border-gray-200 rounded-lg shadow-sm\">\r\n          <div className=\"text-2xl font-bold text-purple-600\">{getUniqueActions().length}</div>\r\n          <div className=\"text-sm text-gray-600\">Action Types</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"mb-6 bg-white p-4 border border-gray-200 rounded-lg shadow-sm\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Search\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\"Search actions, users...\"\r\n              className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Action Type\r\n            </label>\r\n            <select\r\n              value={actionFilter}\r\n              onChange={(e) => setActionFilter(e.target.value)}\r\n              className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"all\">All Actions</option>\r\n              {getUniqueActions().map(action => (\r\n                <option key={action} value={action}>{action}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Time Period\r\n            </label>\r\n            <select\r\n              value={dateFilter}\r\n              onChange={(e) => setDateFilter(e.target.value)}\r\n              className=\"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"all\">All Time</option>\r\n              <option value=\"today\">Today</option>\r\n              <option value=\"week\">Last 7 Days</option>\r\n              <option value=\"month\">Last 30 Days</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Audit Log Table */}\r\n      <div className=\"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Timestamp\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Action\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Details\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  User Agent\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {currentLogs.map((log) => (\r\n                <tr key={log.id} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    {formatDate(log.timestamp)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getActionColor(log.action)}`}>\r\n                      <span className=\"mr-1\">{getActionIcon(log.action)}</span>\r\n                      {log.action}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-500\">\r\n                    <div className=\"max-w-xs truncate\" title={formatDetails(log.details)}>\r\n                      {formatDetails(log.details)}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-sm text-gray-500\">\r\n                    <div className=\"max-w-xs truncate\" title={log.userAgent}>\r\n                      {log.userAgent.split(' ')[0]} {/* Show browser name */}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          \r\n          {currentLogs.length === 0 && (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              No audit entries found matching your criteria.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"mt-6 flex justify-center\">\r\n          <nav className=\"relative z-0 inline-flex rounded-md shadow-sm -space-x-px\" aria-label=\"Pagination\">\r\n            <button\r\n              onClick={() => paginate(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n              className=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50\"\r\n            >\r\n              Previous\r\n            </button>\r\n            \r\n            {[...Array(totalPages)].map((_, index) => {\r\n              const pageNumber = index + 1;\r\n              const isCurrentPage = pageNumber === currentPage;\r\n              \r\n              // Show first page, last page, current page, and pages around current page\r\n              if (\r\n                pageNumber === 1 ||\r\n                pageNumber === totalPages ||\r\n                (pageNumber >= currentPage - 2 && pageNumber <= currentPage + 2)\r\n              ) {\r\n                return (\r\n                  <button\r\n                    key={pageNumber}\r\n                    onClick={() => paginate(pageNumber)}\r\n                    className={`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${\r\n                      isCurrentPage\r\n                        ? 'z-10 bg-blue-50 border-blue-500 text-blue-600'\r\n                        : 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50'\r\n                    }`}\r\n                  >\r\n                    {pageNumber}\r\n                  </button>\r\n                );\r\n              } else if (\r\n                pageNumber === currentPage - 3 ||\r\n                pageNumber === currentPage + 3\r\n              ) {\r\n                return (\r\n                  <span\r\n                    key={pageNumber}\r\n                    className=\"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700\"\r\n                  >\r\n                    ...\r\n                  </span>\r\n                );\r\n              }\r\n              return null;\r\n            })}\r\n            \r\n            <button\r\n              onClick={() => paginate(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n              className=\"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50\"\r\n            >\r\n              Next\r\n            </button>\r\n          </nav>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuditLog; "],"names":["AuditLog","auditLog","loadAuditLog","isLoading","error","clearError","useRole","canViewAuditLog","useAdminPermissions","filteredLogs","setFilteredLogs","useState","searchTerm","setSearchTerm","actionFilter","setActionFilter","dateFilter","setDateFilter","currentPage","setCurrentPage","useEffect","filterLogs","filtered","filter","log","_log$details$userId","_log$details$assigned","action","toLowerCase","includes","details","userId","assignedBy","now","Date","filterDate","setHours","setDate","getDate","setMonth","getMonth","timestamp","sort","a","b","getActionIcon","getActionColor","formatDetails","Object","keys","length","entries","map","_ref","key","value","join","getUniqueActions","Set","indexOfLastLog","indexOfFirstLog","currentLogs","slice","totalPages","Math","ceil","paginate","pageNumber","_jsxs","className","children","_jsx","LoadingSpinner","onClick","type","onChange","e","target","placeholder","dateString","toLocaleString","year","month","day","hour","minute","second","title","userAgent","split","id","disabled","Array","_","index","isCurrentPage"],"sourceRoot":""}